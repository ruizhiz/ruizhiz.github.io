<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-读书笔记-并行多核体系结构基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/27/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E5%B9%B6%E8%A1%8C%E5%A4%9A%E6%A0%B8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2022-04-28T04:50:53.000Z" itemprop="datePublished">2022-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/27/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E5%B9%B6%E8%A1%8C%E5%A4%9A%E6%A0%B8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/">读书笔记 -- 并行多核体系结构基础</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="读书笔记-——-并行多核体系结构基础"><a href="#读书笔记-——-并行多核体系结构基础" class="headerlink" title="读书笔记 —— 并行多核体系结构基础"></a>读书笔记 —— 并行多核体系结构基础</h2><h4 id="第一章、多核体系结构概述"><a href="#第一章、多核体系结构概述" class="headerlink" title="第一章、多核体系结构概述"></a>第一章、多核体系结构概述</h4><h6 id="动态功耗和静态功耗"><a href="#动态功耗和静态功耗" class="headerlink" title="动态功耗和静态功耗"></a>动态功耗和静态功耗</h6><p>die上有静态和动态两种. 将1，3 两式相结合，可以看出，影响动态功耗最重要的杠杆是电源电压。但是，如果我们<br>降低电源电压， f 频率也会跟着降低， 除非阈值电压能够充分降低。然而， 如果阈值电压降低，静态功耗中的漏电流会指数升高。</p>
<ol>
<li>动态功耗 <br> <img src="/pic_for_Multicore_Arch/img.png"></li>
<li>静态功耗 <br> <img src="/pic_for_Multicore_Arch/static_power.png"> </li>
<li>而时钟频率和电源电压的关系, a 的值大约为1.3<br><img src="/pic_for_Multicore_Arch/freq_and_vol.png"></li>
</ol>
<h6 id="核数不能无限增长的原因："><a href="#核数不能无限增长的原因：" class="headerlink" title="核数不能无限增长的原因："></a>核数不能无限增长的原因：</h6><ol>
<li>增加更多的核需要以超线性的方式填充支撑他们的基础组件。比方说，从片外主存获取数据， 其数据带宽很难随着核心数增加而增加， 从而，我<br>们不得不增加cache的大小来避免数据带宽的快速增长。 而根据经验法则，必须将高速缓存的大小增加4倍，才能将其缺失率降低50%。</li>
<li>并行运算中的非并行部分日益成为瓶颈。</li>
<li>功率墙</li>
</ol>
<h4 id="第二章、并行编程概述"><a href="#第二章、并行编程概述" class="headerlink" title="第二章、并行编程概述"></a>第二章、并行编程概述</h4><h6 id="进程和线程的区别："><a href="#进程和线程的区别：" class="headerlink" title="进程和线程的区别："></a>进程和线程的区别：</h6><ul>
<li>进程&#x3D;&#x3D; 火车，线程 &#x3D;&#x3D; 车厢。 进程是资源分配的最小单位，线程是CPU调度的最小单位。 </li>
<li>线程在进程下行进 (单纯的车厢无法运行)</li>
<li>一个进程可以包含多个线程 (一辆火车包含多个车厢)</li>
<li>不同进程间数据很难共享(一辆火车上的乘客很难换到另一辆火车上)</li>
<li>同一进程下不同线程间的数据很容易共享</li>
<li>进程要比线程消耗更多的计算机资源</li>
<li>进程间不会相互影响，一个线程挂掉将会导致整个进程挂掉</li>
<li>进程最适合多核</li>
</ul>
<h4 id="第三章、-共享存储并行编程"><a href="#第三章、-共享存储并行编程" class="headerlink" title="第三章、 共享存储并行编程"></a>第三章、 共享存储并行编程</h4><h4 id="第五章、-存储层次结构概述"><a href="#第五章、-存储层次结构概述" class="headerlink" title="第五章、 存储层次结构概述"></a>第五章、 存储层次结构概述</h4><h6 id="各个存储层次的延迟："><a href="#各个存储层次的延迟：" class="headerlink" title="各个存储层次的延迟："></a>各个存储层次的延迟：</h6><ol>
<li>内层高速缓存：若干个时钟</li>
<li>外层高速缓存： 十几个时钟</li>
<li>本地主存： 上百个时钟</li>
<li>远端存储： 上千个时钟 \</li>
</ol>
<h6 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h6><p>处理器速度的增长远远超过主存访问时延的下降速率。过去，一个load指令可以在一个CPU时钟周期内从主存读到所需的数据，而现在需要上百个时钟周期。在此期间，<br>CPU缺少可以执行的独立指令而大部分时间处于停滞状态。这正是高速缓存发展的初衷。<br>L1 和 L2 高速缓存的命中率可以达到 70% ~ 95%</p>
<h6 id="数据写策略"><a href="#数据写策略" class="headerlink" title="数据写策略"></a>数据写策略</h6><p>cache是临时存储，存储程序和数据的主要地方还是主存。因此cache设计中面临的一个重要问题是当处理器修改了高速缓存中的数据后，这些修改什么时候<br>被传播到外层存储层次。实现中有两种选择：写直达和写回。</p>
<ol>
<li>写直达： cache中的任何一个字节的修改都会被立刻传播到外层存储层次。</li>
<li>写回： 只有当cache中的block被替换时，这些被修改的数据块会写回并覆盖外层存储层次中的过时数据。当然，不需要全部写回，只写回那些被cache中修改过的数据块。</li>
<li>对于memory, 由于片外带宽非常有限，因此往往采取写回的策略。</li>
<li>对于cache, 由于片上带宽较大，因此往往采用写直达的策略。</li>
<li>另一个影响策略选择的因素是硬件故障下的容错。当遇到阿尔法粒子或者宇宙射线时，cache中的数据位会反转其存储的值。cache虽然没有被损坏，但是丢失了<br>存储的数据。在写直达中，当检测到故障时，可以安全地丢弃出现故障的数据块并从外层存储中重新读取。而写回策略，仅仅只有故障检测并不充足。因此，采用写回策略<br>的cache不仅仅需要错误检测，还需要错误纠正。因此，冗余数据位ECC (ERROR Correcting Code) 被添加到cache中。ECC会增加访问时延。</li>
</ol>
<h6 id="一种LRU的实现方法（工作中遇到的"><a href="#一种LRU的实现方法（工作中遇到的" class="headerlink" title="一种LRU的实现方法（工作中遇到的):"></a>一种LRU的实现方法（工作中遇到的):</h6><ol>
<li>每一个slot 对应有一个bit</li>
<li>当需要替换slot时，替换bit 为0的slots</li>
<li>当slot 被替换后，或者被访问时， bit 赋值为1. </li>
<li>当所有的slot 的bit 为1时， 同时赋值为0.</li>
</ol>
<h6 id="L2-cache-容量大小的影响："><a href="#L2-cache-容量大小的影响：" class="headerlink" title="L2 cache 容量大小的影响："></a>L2 cache 容量大小的影响：</h6><ol>
<li>一般情况下，L2对L1采用包含策略，即L1的数据全部包含在L1中， 因此，这一部分会被浪费掉。增加L2的大小可以减少浪费的比例</li>
<li>缩小L2的大小可以降低访问延迟</li>
<li>增大L2的大小可以降低访问缺失率 (miss)</li>
<li>较大的L2会产生更高的功耗。</li>
<li>根据IBM估计，同容量的cache, 使用eDRAM要比SRAM 小三倍。</li>
</ol>
<h4 id="第六章、-共享存储多处理器简介"><a href="#第六章、-共享存储多处理器简介" class="headerlink" title="第六章、 共享存储多处理器简介"></a>第六章、 共享存储多处理器简介</h4><ol>
<li>事务串行化： 对于同一存储地址的多个操作，在所有处理器看来其顺序一致。比如，p1要对x写入1， p2要对x写入3. 如果没有事务串行化，p3,p4 对这两个写入的先后顺序可能有不同看法。<br>有可能p3认为p1先写入，则x的值为3. p4则相反，则两者看到的最后结果不一样</li>
</ol>
<h4 id="第七章、-缓存一致性基础"><a href="#第七章、-缓存一致性基础" class="headerlink" title="第七章、 缓存一致性基础"></a>第七章、 缓存一致性基础</h4><h6 id="组成一个共享存储多处理器系统的方式"><a href="#组成一个共享存储多处理器系统的方式" class="headerlink" title="组成一个共享存储多处理器系统的方式"></a>组成一个共享存储多处理器系统的方式</h6><p>当cache被所有处理器共享时，每个处理器可以直接访问缓存的任意一部分。这种组织方式的好处是不需要缓存一致性的支持，因为系统中只有一个缓存，<br>而他的缺点是处理器和cache需要部署在非常近的距离之内，否则访问缓存的时延会非常高。另外，互联网络必须提供很高的带宽，一位所有的存储器访问都必须通过互联网络。<br>从存储层次上看，互连网络离处理器越近，能被过滤的存储器访问越少，网络需要提供的宽带越大。因此，这种组织方式的可伸缩性较差，只适合于内核数很少的情况。<br>   <img src="/./pic_for_Multicore_Arch/multi_CPU_share_cache.png"><br>上图中的第二种组织方式通常被称为对称多处理器 (Symmetric Multiple Processors)。与共享缓存的方式相比，其有更好的可伸缩性，因为互连网络只需要承担被缓存过滤后的存储器访问流量，<br>并且对时延更不敏感。不过，在对称多处理器中编程会更加困难，因为需要处理缓存数据的局部性问题。</p>
<h6 id="一致性缺失分为两种："><a href="#一致性缺失分为两种：" class="headerlink" title="一致性缺失分为两种："></a>一致性缺失分为两种：</h6><p>真共享和假共享缺失。真共享缺失是由多个线程共享相同的变量导致的， 并且他们会相互无效化。假共享缺失是由多个线程共享同一个缓存块中不同变量的不同字节导致的。<br>因为一致性粒度基于缓存块，所以当块之间没有时间共享时会相互无效化。 </p>
<h6 id="预取和一致性缺失"><a href="#预取和一致性缺失" class="headerlink" title="预取和一致性缺失"></a>预取和一致性缺失</h6><p>预取会通过BusRd在总线上产生干扰。如果某时刻一个缓存拥有E 或者 M 状态的块，则他必须提供该块，并降级为S. 不幸的是，这会带来以下三类风险。</p>
<ol>
<li>预取块会导致缓存中一个当前的块被收回。</li>
<li>预取的块可能会在该处理器使用前被偷。此风险随着更加激进的预取(即更早的预取)而变得更加严重。例如： 当接收到一个无效化请求，预取的块必须被无效化并重新预取。<br>   当处理器需要访问他时，依旧会遇到缓存缺失，这样，即使预测正确也没用。</li>
<li>当该块被一个存储状态为E 或者M 的缓存提供时，如果提供者仍需要写入该块，写操作就会被延迟，因为他要在总线发出无效化请求。</li>
</ol>
<p>综上，如果预取的太早的话，会降低会降低处理器和预取的效率。</p>
<h6 id="写无效和写更新"><a href="#写无效和写更新" class="headerlink" title="写无效和写更新"></a>写无效和写更新</h6><p>缓存一致性协议可以分为写无效和写更新。<br>写无效协议就是当一个处理器核要把对某一单元新写的值传播给其它处理器核时，使其它处理器核中该单元的备份无效，<br>这样当其它处理器核使用该备份时需要重新获得新值。<br>写更新协议就是当一个处理器核要把对某一单元新写的值传播给其它处理器核时，把拥有该备份的其它处理器核中的数据直接更新为新值。<br>写无效的优点是，一旦某处理器核使某一变量在所有拥有该备份的缓存中无效后，它就取得了对此变量的独占权，随后对此变量的更新不必再通知其它处理器核，直到其它处理器核请求访问此变量而导致独占权被取消；<br>缺点是，当某变量在一个处理器核中的备份无效后，此处理器核再访问该变量会引起cache miss，当一个共享块被多个处理器核频繁访问时会导致“乒乓”效应，导致性能严重下降。<br>写更新的优点是，一旦某cache缓存了某一个共享变量，它就会一直拥有此变量的最新备份；缺点是，当某一共享变量被更新时，所有拥有该变量的处理器核的备份都会被更新，哪怕这些处理器已经不需要这个变量了。<br>写无效协议适用于顺序共享（Sequential Sharing）的程序；写更新协议适用于紧密共享（Tight Sharing）的程序。</p>
<h6 id="侦听-x2F-广播式和目录式"><a href="#侦听-x2F-广播式和目录式" class="headerlink" title="侦听&#x2F;广播式和目录式"></a>侦听&#x2F;广播式和目录式</h6><p>从传播给谁的角度看，在缓存一致性协议中，一致性消息可以被发送到所有缓存，也可以被发送到特定缓存。根据这种区别可以把一致性协议分为广播&#x2F;侦听式和基于目录式。<br>广播&#x2F;侦听式的原理就是当一个处理器核修改了cache line之后，将广播通知到总线上其他所有的核心，而所有核心需要一个硬件单元来负责侦听总线上的事务广播。<br>但是要时刻监听总线上的一切活动没有必要，所有处理器核之间共享的内存数据毕竟只占少数，大部分监听可以说是无用的，所以又引入了一个用于侦听过滤器（snoop filter）。<br>过滤的标准就是看自家的核心有没有缓存这个传输事务涉及到的内存位置，或者说有没有对应的cache line。广播&#x2F;侦听方式会占用比较大的总线带宽，尤其是处理器核心数目很多的时候。<br>基于目录式的原理是点对点的方式进行传播，每个总线事务只会发给相关的核心。所谓相关，就是拥有这个事务所涉及内存位置对应的cache line。<br>那怎么知道哪些核心是相关的呢？基于目录的主要思想是，为每一个cache line维护一个目录项，该目录项记录所有当前持有此备份的处理器核心号以及此行是否被改写等信息。<br>当一个处理器核写某一个cache line且可能引起数据不一致时，它就根据目录内容只向持有此备份的那些核心发出写使无效&#x2F;写更新信号，<br>从而避免了广播。典型的目录组织方式是位向量目录。位向量目录中的每一个目录项都有一个N位的向量，N是系统中的处理器核心数。位向量中的第i位为1表示第i个处理器核心持有该备份。<br>每一目录项还有一个改写位表示某核心独占并改写此行。相比广播&#x2F;侦听，目录式占用较少的总线带宽。但是目录式的缺点很明显，如果处理器核心多且共享存储容量大的时候，目录的存储开销非常大。另外，每次传输事务都要查询目录表项，也就造成了一些延迟。</p>
<h4 id="第八章、-对同步的硬件支持"><a href="#第八章、-对同步的硬件支持" class="headerlink" title="第八章、 对同步的硬件支持"></a>第八章、 对同步的硬件支持</h4><h6 id="锁的实现"><a href="#锁的实现" class="headerlink" title="锁的实现"></a>锁的实现</h6><p>对锁实现性能的评估：</p>
<ol>
<li>无竞争获取锁的延迟：当线程间没有竞争时，获取一个锁所花费的时间。</li>
<li>通信量</li>
<li>公平性。公平性的标准是，在一个锁实现中， 线程饥饿的情况是否可能存在，即，一个线程不能够长时间地持有锁，即使这个锁在这段时间内是空闲的。</li>
<li>存储。锁的实现所需要的存储空间。</li>
</ol>
<p>缓存一致性协议提供了原子性被保障的基础。举例来说，当遇到一个原子指令时，这个一致性协议知道需要保证其原子性。他首先会获得对存储单元M的”独家所有权” (将其他包含M的缓存块中的copy都置为无效).<br>当获得独家所有权之后，这个协议会确保只有一个处理器能够访问这个块，而如果其他处理器在此时想要访问的话，就会经历缓存缺失，接下来原子指令就可以执行了。<br>在原子指令持续期间，其他处理器不允许读或者写这个块。</p>
<h6 id="TS锁"><a href="#TS锁" class="headerlink" title="TS锁"></a>TS锁</h6><p>test-and-set. 在获取锁的尝试中的第一条指令是test-and-set指令，它原子执行下面几个步骤： </p>
<ol>
<li>从lockvar所在的存储单元中读取值到寄存器R1中(使用一个独占读指令，如BusRdx or BusUpgr)</li>
<li>将寄存器R1中的值和0相比较，如果是0，将1 写入lockvar(说明这是一次成功的锁的获取)。 如果R1中的值不是0，则不写入任何数。(失败的锁获取)</li>
<li>第二条指令时branch, 当R1中的值非0 时，branch回到上面的第一步。</li>
<li>锁的释放只需要将0赋给lockvar即可，而不需要原子指令。</li>
</ol>
<p>但是，这里显然的一个问题是， 假设，我们有p1,p2,p3, 同时想去获得锁，p1最终获得了。这时， p2,p3都会一直重复上面的1,2两个步骤，这样，p2, p3 不断发送BusRdx, 使得彼此的缓存块反复失效，而不得不反复获取。<br>这样，每一次获取锁的尝试总会触发一个总线事务，而不管这个锁目前是否被持有。所以，源码中出现的单个临界区的通信量会非常高，而这可能延迟锁的释放，使得通信量状态更加恶化。</p>
<h6 id="TTSL"><a href="#TTSL" class="headerlink" title="TTSL"></a>TTSL</h6><p>test-and-test-and-set, 一种减少通信请求的方式：指定一种标准来检测一个锁获取请求是否会导致失败，如果可能导致失败，我们就推迟原子指令的执行。只有当一个获取锁的尝试有很大概率成功的时候，我们才去尝试执行原子指令。<br><img src="/./pic_for_Multicore_Arch/TS.png" title="TS的实现"></p>
<p><img src="/./pic_for_Multicore_Arch/TTSL.png" title="TTSL的实现"><br>通过上面两个代码对比可以看出，TTSL多了一个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ld  R1, &amp;lockvar</span><br><span class="line">bnz R1, lock</span><br></pre></td></tr></table></figure>
<p>从而，大大降低了 <code>t&amp;s</code> 运行的次数。从而减少了BusRdx的次数。<br>虽然TTSL 对于 TS 来说是一种进步，但是他的实现仍然存在很重大的缺陷。</p>
<h6 id="LL-x2F-SC锁"><a href="#LL-x2F-SC锁" class="headerlink" title="LL&#x2F;SC锁"></a>LL&#x2F;SC锁</h6>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/27/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E5%B9%B6%E8%A1%8C%E5%A4%9A%E6%A0%B8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/" data-id="cl2ijblrq0000t0uxdrn2fww7" data-title="读书笔记 -- 并行多核体系结构基础" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-验证经验总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/27/%E9%AA%8C%E8%AF%81%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2022-04-28T04:45:48.000Z" itemprop="datePublished">2022-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/04/27/%E9%AA%8C%E8%AF%81%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/">验证经验总结</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="验证经验"><a href="#验证经验" class="headerlink" title="验证经验"></a>验证经验</h2><ol>
<li>对于一些counter, 不应该按照design的位宽去定义其位宽，如果定义成一样的位宽，就有可能 miss overflow issue</li>
<li>signal-level errors are trapped by assertions in the interface; protocol errors are spotted by monitors; and<br>transaction-level bugs are found by scoreboards. </li>
<li>agent 应该是per bus&#x2F;interface 的。</li>
<li>绝大多数的test都应该是random tests. </li>
<li>在testbench中， 应该有一个CFG class, 他的作用是确定DUT 如何configure, how to generate stimulus, and how to build the testbench.</li>
<li>CFG class中，应该有些knobs， 可以随机化去影响simulation.</li>
<li>cfg class应该在base_test中实例化，然后传递handle给env.</li>
<li>每一个env 都应该有一个自己的CFG class. 同时，这个CFG class 可能包含其他的cfg class。 如果这个env包含一些lower-level的env, 那么，cfg class<br>中也要对应的包含lower-level ones. 同时，before build anything, 应该先创建highest-level cfg class, 然后随机化，and then, 根据cfg class<br>中的信息去决定整个TB应该如何被创建。</li>
<li>&#96;uvm_fileld_* will automate a lot of work for us, and we should always use them in the components we write. </li>
<li>在TLM中， port 是用来发起数据的传输； imp是用来接收数据的传输； export是用来将imps expose给更高等级的components.</li>
<li>使用TLM 而非传递handles的原因有以下几点：<ol>
<li>handles可能无法知道哪一部分unexpected modify the data. </li>
<li>使用TLM可以很清楚的看到数据从哪里传向哪里。</li>
<li>当然，以下几种情况更适合用handles:<ol>
<li>sequence have handles to the sequencer, so they can see random knobs, and react to monitored event. </li>
<li>对于cfg class, 所有的componnents 都应该通过handles 去访问同一个实例化的cfg class.</li>
</ol>
</li>
</ol>
</li>
<li>cfg class在create的时候应该带上get_full_name(), eg: <br><code>clk_rst_cfg = clk_rst_cfg_c::type_id::create(&#123;get_full_name(), &quot;.cclk_rst_cfg&quot;&#125;);</code><br>这样做的目的是为了好debug。 因为Cfg是object， 没有component hierarchy，所有，在有多个clk_rst_cfg 时，可能会搞混，不知道信息到底来自于哪一个cfg. </li>
<li>sequencer: 多个seq经常在同一seqr上同时launch, seqr将会决定先发送哪一个。 </li>
<li>vkit: modules, interface and teh packages are put together, they are collectively known as a verification kit. &#x3D;&gt; vkit.</li>
<li>uvm_config_db 中的set 和 get的类型必须一致，即使是child &amp; parent class， 也不行。</li>
<li><ol>
<li>当 assigning a value to a variable with 32 bits or fewer, it’s fine if 你没有申明值的宽度 <br>For example:<br> <code>a_item.addr = &#39;h8000_0048; // works fine</code> </li>
<li>但是当给一个宽于32bits的变量赋值时， 你必须要指明值的宽度. Otherwise,<br>Verilog will truncate all bits beyond the 32nd. For example:</li>
</ol>
</li>
</ol>
<p>   <code>a_item.addr = &#39;h8_0000_0048;  // MSB truncated! Assigns addr to &#39;h48</code><br>   <code>a_item.addr = 64&#39;h8_0000_0048; // works fine! </code><br>17. 我们不能只读或者写单个reg_field. 只能access 整个reg.<br>18. difference between volatile and non-volatile<br>    1. non-volatile is the one that can be described as “set-andforget.” Once written to, this field will never change its<br>value until another write occurs.<br>    2. volatile can be changed by the RTL at any time.<br>19. ral_block 应该在base_test中声明并实例化<br>20. 在对uvm reg进行读写之前，必须对map 进行下列两项操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ral_block_a.get_default_map().set_sequencer(m_env.seqr, ral_adapter);</span><br><span class="line">ral_block_a.get_default_map().set_auto_predict(0);</span><br></pre></td></tr></table></figure>
<p>uvm_reg_map.set_sequencer()</p>
<blockquote>
<p>virtual function void set_sequencer ( uvm_sequencer_base  sequencer,    <br>uvm_reg_adapter  adapter  &#x3D;  null )<br>Set the sequencer and adapter associated with this map.  This method must be called before starting any sequences based on uvm_reg_sequence.</p>
</blockquote>
<ol start="20">
<li>uvm_reg_predictor 在声明的时候必须声明其BUSTYPE.<br><code>class uvm_reg_predictor #(type BUSTYPE=int) extends uvm_component</code><br>而在实例化中， 也需要声明其BUSTYPE<br><code>predictor = uvm_reg_predictor#(item_c)::type_id::create(&quot;predictor&quot;, this);</code></li>
<li>predictor 在实例化以后需要做以下几项事情：1. assign adapter and map. 2, connect bus_in imp with the port in monitor.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">predictor.adapter = adapter;</span><br><span class="line">predictor.map = ral_block.get_default_map();</span><br><span class="line">env.mst_agent.mon.item_port.connect(predictor.bus_in);</span><br></pre></td></tr></table></figure></li>
<li>我们应该在driver &amp; monitor 中使用clocking block. That will solve all of the race conditions and will make your transactors behave like real hardware.<br>eg: 这个cb 会告诉simulator, b是一个以posedge clk 对应的output，因此，当使用此cb去drive signals的话，simulator 会知道在posedge clk后再去驱动b.<br>而对于a, 它将会在posedge clk前被sample. <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">clocking drv_cb @(posedge clk);</span><br><span class="line">  output b;</span><br><span class="line">  input a;</span><br><span class="line">endclocking :drv_cb</span><br></pre></td></tr></table></figure></li>
<li>在config.pl或者pkg.sv中， 添加文件或者include file的顺序很重要，如果A需要用到B中的东西， 那么应该先添加B再添加A.</li>
<li>x_check 应该被放在interface中去做。任何signal-related checking 如果可以放在assertion里面，那就放在assertion中。</li>
<li>Should you call write() or update() on the B register?<br>Using the write() task instead of the update() task could be important. If back-to-back data chosen happened to be the same,<br>then the update() task might not perform the second write. However, in this case because the B field is<br> built as volatile, even an update() will perform the write. (It’s best to be safe, though).</li>
<li>如非必要，不要predict the pins value at every clk cycle. 这会耗费大量的精力。如果要比较的act&#x2F;exp的值之间有几个clk的delay, 可以<br>把数据放在fifo中， 这样就不需要考虑delay了。 </li>
<li>在构建coverage group 时，有一点很重要，就是，我们需要collect coverage on what happened, instead of what we think happened. 比如，<br>不能将covergroup 放在seq中，而应该将其放在input output的interface中， 去收集数据。也可以将其放在monitor中， 在monitor处理完数据后进行收集。</li>
<li>The Z state is used for modeling a number situations where there are multiple drivers on a single net. </li>
<li>需要注意，systemverilog 会自动截断和填充不同的位宽，因此应当注意溢出事件。同时还应当注意处理有符号和无符号算术。比如说下面这两个expression. 他们看起来一样，<br>但是都隐含着问题。expression A， let’s say X is 32bits, if X &#x3D;&#x3D; ‘hF000_0001, X*4 &#x3D;&#x3D; ‘h0000_0004, it will be equal to Y&#x3D;&#x3D; 4. The fix for this is making sure the width of the multiplication result is large enough not to truncate using : <code>(X * 34’d4) == Y</code><br>Expression B的问题就更明显了， let’s say Y &#x3D;&#x3D; ‘h3， Y&#x2F;4 &#x3D;&#x3D; ‘h0, &#x3D;&gt; it will be equal to X &#x3D;&#x3D; 0</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Expression A: (X * 4) == Y</span><br><span class="line">Expression B:  X == (Y /4)</span><br></pre></td></tr></table></figure>
<h2 id="特定语法"><a href="#特定语法" class="headerlink" title="特定语法"></a>特定语法</h2><h4 id="1-如何在bind-中使用-96-ifdef"><a href="#1-如何在bind-中使用-96-ifdef" class="headerlink" title="1. 如何在bind 中使用 &#96;ifdef"></a>1. 如何在bind 中使用 &#96;ifdef</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bind</span> mm_component oc_if oc_if_1(</span><br><span class="line">    <span class="variable">.reset_n</span>(reset_n),</span><br><span class="line">    <span class="variable">.always_on_clk</span>(<span class="meta">`<span class="keyword">ifdef</span> DD_TB</span></span><br><span class="line">                     m_clk</span><br><span class="line">                  <span class="meta">`<span class="keyword">else</span> </span></span><br><span class="line">                     n_clk</span><br><span class="line">                  <span class="meta">`<span class="keyword">endif</span>),</span></span><br><span class="line">    ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="2-constraint"><a href="#2-constraint" class="headerlink" title="2. constraint"></a>2. constraint</h4><ol>
<li><p>generate an array of random numbers where a certain value is repeated fixed number of times<br>对于下面的arr, 我想constraint使其中10个elements 的值为5. 如何去做呢？ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class numberGen;</span><br><span class="line">  rand bit[7:0] arr[100];</span><br><span class="line">  int i,j;</span><br><span class="line">  function new();</span><br><span class="line">    i = 5; j = 10;</span><br><span class="line">  endfunction</span><br><span class="line">  constraint pick_ij &#123;(arr.sum(item) with (int&#x27;(item==i))) == j;&#125;</span><br><span class="line">endclass : numberGen</span><br></pre></td></tr></table></figure>
</li>
<li><p>generate non repeating values in an array of class</p>
<pre><code>class A;
rand bit [3:0] value [10];
constraint CYCLC &#123; unique &#123;value&#125;;&#125;
</code></pre>
</li>
</ol>
<h4 id="3-difference-between-39-and"><a href="#3-difference-between-39-and" class="headerlink" title="3. difference between &#39;{}and {}"></a>3. difference between <code>&#39;&#123;&#125;</code>and <code>&#123;&#125;</code></h4><ol>
<li><code>&#123;&#125;</code> means concatenation. It results in a vector that consists of bits of its operands. It is used in generic verilog operations. </li>
<li><code>&#39;&#123;&#125;</code> is a definition of a anonymous aggregate structure such as an array or struct. It is used in aggregate&#x2F;pattern assignments. It also has a set of features to do pattern expression to assign to specified members of structs and arrays.</li>
<li>In case of packed arrays and structs and without pattern expressions both operators behave similarly.</li>
<li>实例： <blockquote>
<p>int A3[1:3]; <br>int A9[1:9];<br>A3 &#x3D; ‘{1, 2, 3}; &lt;– legal (case0)<br>A9 &#x3D; ‘{3{A3}}; &lt;– illegal (case1)<br>A9 &#x3D; {A3, 4, 5, A3, 6}; &lt;– legal (case2)<br>A9 &#x3D; ‘{9{1}}; &lt;– legal (case3)<br>A9 &#x3D; {9{1}}; &lt;– illegal (case4)<br> assignment patterns require each operands to be assignment compatible with each array element, and there needs to be an operand in the pattern for each element of the array. replication of operands is allowed<br>Array concatenation requires that each operand be assignment compatible with an element of the array, or an array of elements that are assignment compatible with an element of the array. Replication is not allowed.<br>case0 is an assignment pattern of 3 operands to an array of three elements<br>case1 is illegal because Your assignment pattern only has three (repeated) operands where nine are required. And the three operands you do have are not assignment compatible: each element. needs to be an int, not an array of ints.<br>case2 is an array concatenation whose operands total 9 array elements<br>case3 is an assignment pattern of 9 replicating operands into an array of 9 elements<br>case4 is illegal because array concatenation does not allow replication.\</p>
</blockquote>
</li>
<li>总结： 如果有replicating operands, <code>&#123;(num)&#123;...&#125;&#125;</code>,那么必须用<code>&#39;&#123;&#125;</code>, 而且，用<code>&#39;&#123;&#125;</code>的时候，一定要确保前后值位数一致</li>
</ol>
<h2 id="程序细节"><a href="#程序细节" class="headerlink" title="程序细节"></a>程序细节</h2><h4 id="1-how-to-start-a-test"><a href="#1-how-to-start-a-test" class="headerlink" title="1. how to start a test?"></a>1. how to start a test?</h4><p>A test is usually started within testbench top by a task called run_test.<br>This global task should be supplied with the name of user-defined UVM test that needs to be started. If the argument to run_test is blank, it is necessary to specify the testname via command-line options to the simulator using <code>+UVM_TESTNAME</code>.</p>
<h4 id="2-系统的top-level应该如何构建？"><a href="#2-系统的top-level应该如何构建？" class="headerlink" title="2. 系统的top level应该如何构建？"></a>2. 系统的top level应该如何构建？</h4><ol>
<li>在top.sv中，在一个<code>inital block</code>中<code>run_test();</code></li>
<li>在base_test中，创建并初始化各个component, ral_block，并将其连接起来。 <h4 id="3-difference-bewteen-tb-top-and-hw-top"><a href="#3-difference-bewteen-tb-top-and-hw-top" class="headerlink" title="3. difference bewteen tb_top and hw_top"></a>3. difference bewteen tb_top and hw_top</h4></li>
<li>tb_top has the instances, bindings and registrations of all of the testbench interfaces. </li>
<li>hw_top: 这里会有DUT instance, 并且会有相应的wiring connections.</li>
</ol>
<h2 id="4-vim中好用的几个命令"><a href="#4-vim中好用的几个命令" class="headerlink" title="4. vim中好用的几个命令"></a>4. vim中好用的几个命令</h2><h4 id="1-VIM-的代码提示功能"><a href="#1-VIM-的代码提示功能" class="headerlink" title="1. VIM 的代码提示功能"></a>1. VIM 的代码提示功能</h4><p>在编辑模式下 ，快捷键 Ctrl+n 或者 Ctrl+p 会有代码提示功能，我们可以实现快速录入的效果。</p>
<h4 id="2-可视化模式下-v-的特殊操作"><a href="#2-可视化模式下-v-的特殊操作" class="headerlink" title="2.可视化模式下 v 的特殊操作"></a>2.可视化模式下 v 的特殊操作</h4><p>当操作的文本光标在 “”，‘’ ，（），{} ，[（双引号，单引号，小括号，大括号，中括号）<br>当中的时候,可以通过 va”选中 ”“ 内的所有内容包括双引号 ，vi” 选中 “” 内的所有内容，不包括 “”。va,vi 会快速选择区域，va 后面会紧跟一个区域结束标志，a 会选中结束符标志，i 就不会。</p>
<h4 id="3-宏录制的录制操作"><a href="#3-宏录制的录制操作" class="headerlink" title="3.宏录制的录制操作"></a>3.宏录制的录制操作</h4><p>先将光标移动到第一行，在普通模式下按下 q 键（宏录制是 q 键启动的),在按一个 a （字母随意）,表示该宏注册为 a ，按下 I 在行首插入一个 tab 键，按下jj或者 <ESC>退出编辑模式,按下 j 将光标移动到下一行行首，最后按下 q 键完成录制操作（宏录制是 q 键结束的）。<br>总结上面例子的操作流程：<br>q → a → I → tab → jj → j → q <br>上面的例子成功地把在行首插入 tab 的功能录制了下来，那么如何应用到其他行呢？</p>
<h4 id="4-宏录制的使用"><a href="#4-宏录制的使用" class="headerlink" title="4.宏录制的使用"></a>4.宏录制的使用</h4><p>上述的例子，在正常模式下，按 @a执行宏录制的一系列动作，将会在第二行执行插入 tab 。<br>@@ 是对上一次宏使用的重复操作。n@a 就会执行 n 次一系列的动作。使用宏录制可以一次执行一系列的操作，可以针对一些重复度较高的操作进行宏录制。</p>
<h4 id="5-在当前行上移动光标"><a href="#5-在当前行上移动光标" class="headerlink" title="5. 在当前行上移动光标"></a>5. 在当前行上移动光标</h4><ol>
<li><code>0</code> 移动到行头</li>
<li><code>^</code> 移动到本行的第一个不是 blank 字符</li>
<li><code>$</code> 移动到行尾<h4 id="6-跨行移动光标"><a href="#6-跨行移动光标" class="headerlink" title="6. 跨行移动光标"></a>6. 跨行移动光标</h4></li>
<li><code>H</code> 光标定位到当前屏幕的第一行行首</li>
<li><code>M</code> 光标移动到当前屏幕的中间</li>
<li><code>L</code> 光标移动到当前屏幕的尾部<h4 id="7-Mark-标记"><a href="#7-Mark-标记" class="headerlink" title="7. Mark 标记"></a>7. Mark 标记</h4></li>
<li>什么是 mark ? 我们通常在读一本很厚的书的时候，通常会加上一个书签，用来标记我们的进度，在 vim 当中也有一个类似的概念，我们也可以使用 vim 在我们的文件上打上一个标记，方便我们快速的跳到这个位置。</li>
<li>如何使用 mark ? 按下键盘上的 m , 紧跟着在按下键盘上的（a-zA-Z）当中的任何一个字母，这样一个标记 （mark）例如 ma, mA 这样一个名字叫做 a 或者 A 的标记就建立起来了。<br>例如 :<br>ma<br>意思在当前文件的光标所在的行建立了一个标记，以后我们可以快速定位到这个位置。</li>
<li>如何激活标记？<br>使用 ‘（单引号） 或者 <code>(常规键盘靠近数字键 1 左边的按键，我这里就做撇号) ，紧接着按下当初标记的那个字母就会跳到当初标记的那个位置。 例如 ：</code>a 和 ‘a</li>
</ol>
<h2 id="shell-命令"><a href="#shell-命令" class="headerlink" title="shell 命令"></a>shell 命令</h2><h4 id="1-命令行光标移动技巧"><a href="#1-命令行光标移动技巧" class="headerlink" title="1. 命令行光标移动技巧"></a>1. 命令行光标移动技巧</h4><blockquote>
<p>Ctrl – a ：移到行首<br>Ctrl – e ：移到行尾<br>Ctrl – b ：往回(左)移动一个字符<br>Ctrl – f ：往后(右)移动一个字符<br>Alt – b ：往回(左)移动一个单词<br>Alt – f ：往后(右)移动一个单词<br>Ctrl – xx ：在命令行尾和光标之间移动</p>
</blockquote>
<h4 id="2-命令行编辑命令"><a href="#2-命令行编辑命令" class="headerlink" title="2. 命令行编辑命令"></a>2. 命令行编辑命令</h4><blockquote>
<p>Ctrl - w: 从光标位置删除到行首 <br>Crtl - k: 从光标开始，删除到行尾。<br>Ctrl - y: 粘贴之前删除的内容到光标后 <br>Ctrl - r: 搜索历史命令，随着输入会显示历史命令中的一条匹配命令。enter执行。<br>Ctrl - g: 从历史搜索模式中退出.</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/27/%E9%AA%8C%E8%AF%81%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/" data-id="cl2ijblru0001t0ux3fhw0910" data-title="验证经验总结" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-shell-基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/18/shell-%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2022-03-19T04:48:10.000Z" itemprop="datePublished">2022-03-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/18/shell-%E5%9F%BA%E7%A1%80/">shell_基础</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-shell概述"><a href="#1-shell概述" class="headerlink" title="1. shell概述"></a>1. shell概述</h2><p>shell 是一个命令行解释器，它接收应用程序&#x2F;用户命令，然后调用操作系统内核。</p>
<h2 id="2-shell-脚本入门"><a href="#2-shell-脚本入门" class="headerlink" title="2. shell 脚本入门"></a>2. shell 脚本入门</h2><h4 id="1-脚本格式"><a href="#1-脚本格式" class="headerlink" title="1.脚本格式"></a>1.脚本格式</h4><p>脚本以<code>#!/bin/bash</code> 开头(指定解析器)。也可以不写。</p>
<h4 id="2-第一个脚本-hello-world"><a href="#2-第一个脚本-hello-world" class="headerlink" title="2.第一个脚本 hello world"></a>2.第一个脚本 hello world</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo &quot;hello world&quot; </span><br></pre></td></tr></table></figure>
<h4 id="3-第二个脚本：-多命令处理"><a href="#3-第二个脚本：-多命令处理" class="headerlink" title="3. 第二个脚本： 多命令处理"></a>3. 第二个脚本： 多命令处理</h4><p>下面的代码是在父目录下创建Ruizhi_test.txt, 并写入”I Love Zhijie”. <br>touch 是用来创建一个文件的without any content. cat 是用来创建一个文件with content.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 #!/bin/bash</span><br><span class="line">2 cd ../</span><br><span class="line">3 touch Ruizhi_test.txt</span><br><span class="line">4 echo &quot;I Love Zhijie&quot; &gt;&gt; Ruizhi_test.txt</span><br></pre></td></tr></table></figure>
<h2 id="3-shell-中的变量"><a href="#3-shell-中的变量" class="headerlink" title="3. shell 中的变量"></a>3. shell 中的变量</h2><h4 id="1-常用的系统变量"><a href="#1-常用的系统变量" class="headerlink" title="1.常用的系统变量"></a>1.常用的系统变量</h4><ol>
<li><code>$HOME</code>： 显示home地址，和 ‘cd ‘ 去的地址是一样的。</li>
<li><code>$PWD</code> ：显示当前地址</li>
<li><code>$SHELL</code>：显示默认的解析器 &#x2F;bin&#x2F;zsh</li>
<li><code>$USER</code>: 显示当前用户</li>
</ol>
<h4 id="2-自定义变量"><a href="#2-自定义变量" class="headerlink" title="2.自定义变量"></a>2.自定义变量</h4><ol>
<li><code>A=2</code>.设定变量A.需要注意的是’&#x3D;’两端不能有空格</li>
<li><code>echo $A</code> 返回2</li>
<li><code>unset A</code>，撤销A</li>
<li><code>readonly B=3</code> 声明静态变量，注意：不能unset。</li>
<li>在bash中， 变量默认类型都是字符串类型，无法直接进行数值计算。eg: <code>C=1+1</code>, <code>echo $C</code><br>这里得出的结果是 ‘1+1’</li>
<li>变量的值如果有空格，需要加双引号或者单引号。 <code>D=&quot;I LOVE YOU&quot;</code></li>
<li>可以把变量提升为全局环境变量，可供其他shell 程序使用.</li>
<li><code>export 变量名</code> 可以将变量提升为全局变量，供其他shell 使用。</li>
</ol>
<h4 id="3-特殊变量"><a href="#3-特殊变量" class="headerlink" title="3.特殊变量"></a>3.特殊变量</h4><ol>
<li><code>$n</code>: n为数字。$0 代表该脚本的名称，$1-$9代表第一到第九个参数。10以上的参数需要用大括号，eg. ${10}.<br>如下面代码所示，$0即为shell的文件名。而$1即为传入的第一个参数。<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 #!/bin/bash</span><br><span class="line">2 echo &quot;$0, $1, $2, $3&quot;</span><br><span class="line"><span class="meta">#</span><span class="language-bash">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh I Love YOU</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">helloword.sh, I, Love, YOU</span></span><br></pre></td></tr></table></figure></li>
<li><code>$#</code>: 获取所有输入参数的个数。<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 #!/bin/bash</span><br><span class="line">2 echo &quot;$0, $1, $2, $3&quot;</span><br><span class="line">3 echo $#</span><br><span class="line"><span class="meta">#</span><span class="language-bash">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh I Love YOU</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">helloword.sh, I, Love, YOU</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">3</span></span><br></pre></td></tr></table></figure></li>
<li><code>$*</code>: 这个变量代表命令行中所有的参数。把所有参数看做一个整体<br><code>$@</code>: 这个变量也代表命令行中的所有参数，不过其将每个参数区分对待。 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1 #!/bin/bash</span><br><span class="line">2 echo $#</span><br><span class="line">3 echo $*</span><br><span class="line">4 echo $@</span><br><span class="line"><span class="meta">#</span><span class="language-bash">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh I Love YOU</span> </span><br><span class="line"><span class="meta">#</span><span class="language-bash">3</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">I Love YOU</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">I Love YOU</span></span><br></pre></td></tr></table></figure></li>
<li><code>$?</code>: 最后一次执行的命令的返回状态。如果这个变量的值为0， 证明上一个命令正常执行； 如果为非0<br>(具体是那个数， 由命令自己决定), 则证明上一条命令执行不正确。<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh I Love YOU </span><br><span class="line">3</span><br><span class="line">I Love YOU</span><br><span class="line">I Love YOU</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % echo $?                   </span><br><span class="line">0</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % $?</span><br><span class="line">zsh: command not found: 0</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % echo $? </span><br><span class="line">127</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4-运算符"><a href="#4-运算符" class="headerlink" title="4.运算符"></a>4.运算符</h2><h4 id="1-基本语法"><a href="#1-基本语法" class="headerlink" title="1.基本语法"></a>1.基本语法</h4><ol>
<li><code>$((运算式))</code> 或者 <code>$[运算式]</code></li>
<li><code>expr +,-,\*,/,%</code> 注意，expr 运算符间要有空格</li>
</ol>
<h4 id="2-案例实操"><a href="#2-案例实操" class="headerlink" title="2.案例实操"></a>2.案例实操</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % expr 2 + 3</span><br><span class="line">5</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % expr 2+3</span><br><span class="line">2+3</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % expr 2 + 3 \* 4</span><br><span class="line">14</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % expr `expr 2 + 3` \* 4 #(2+3)*4</span><br><span class="line">20</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % s=$[(2+3)*4]          </span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % echo $s     </span><br><span class="line">20</span><br></pre></td></tr></table></figure>

<h2 id="5-条件判断"><a href="#5-条件判断" class="headerlink" title="5.条件判断"></a>5.条件判断</h2><h4 id="1-基本语法-1"><a href="#1-基本语法-1" class="headerlink" title="1.基本语法"></a>1.基本语法</h4><ol>
<li><code>[ condition ]</code>, 注意，condition 前后要有空格。<code>[]</code>返回false</li>
</ol>
<h4 id="2-常用判断条件"><a href="#2-常用判断条件" class="headerlink" title="2. 常用判断条件"></a>2. 常用判断条件</h4><ol>
<li>两个整数之间的比较<ol>
<li><code>-lt</code> 小于</li>
<li><code>-le</code> 小于等于</li>
<li><code>-eq</code> 等于</li>
<li><code>-gt</code> 大于</li>
<li><code>-ge</code> 大于等于</li>
<li><code>-ne</code> 不等于</li>
</ol>
</li>
<li>按照文件权限进行判断<ol>
<li><code>-r</code> 有读的权限</li>
<li><code>-w</code> 有写的权限</li>
<li><code>-x</code> 有执行的权限 execute</li>
</ol>
</li>
<li>按照文件类型进行判断<ol>
<li><code>-f</code> 文件存在并且是一个常规文件 file</li>
<li><code>-e</code> 文件存在 existence</li>
<li><code>-d</code> 文件存在并且是一个目录(directory)</li>
</ol>
</li>
<li>多条件判断<ol>
<li>&amp;&amp; 只有前一条成功，才执行第二条</li>
<li>|| 只有前一条失败，才执行第二条</li>
</ol>
</li>
</ol>
<h4 id="3-案例实操"><a href="#3-案例实操" class="headerlink" title="3. 案例实操"></a>3. 案例实操</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % [23 -gt 22]</span><br><span class="line">zsh: bad pattern: [23</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % [ 23 -gt 22 ]</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % echo $?</span><br><span class="line">0</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % [ 23 -lt 22 ]</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % echo $?</span><br><span class="line">1</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % [ -w helloword.sh ]</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % echo $?</span><br><span class="line">0</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % [ 23 -lt 22 ] &amp;&amp; echo OK</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % [ 23 -gt 22 ] &amp;&amp; echo OK</span><br><span class="line">OK</span><br></pre></td></tr></table></figure>

<h2 id="6-流程控制"><a href="#6-流程控制" class="headerlink" title="6. 流程控制"></a>6. 流程控制</h2><h4 id="1-if-判断"><a href="#1-if-判断" class="headerlink" title="1. if 判断"></a>1. if 判断</h4><ol>
<li>基本语法：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ];then</span><br><span class="line">  ...</span><br><span class="line">fi </span><br><span class="line">或者</span><br><span class="line">if [ condition ]</span><br><span class="line">  then</span><br><span class="line">     ...</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
注意事项： 1， <code>[ condition ]</code> 中间必须有空格。 2. if 后要有空格</li>
<li>案例实操： <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  1 #!/bin/bash</span><br><span class="line">  2 if [ $1 -eq 1 ]</span><br><span class="line">  3     then</span><br><span class="line">  4     echo &quot;Ruizhi&quot;</span><br><span class="line">  5 elif [ $1 -eq 2 ];then</span><br><span class="line">  6     echo &quot;Love you&quot;</span><br><span class="line">  7 fi</span><br><span class="line"></span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh 1</span><br><span class="line">Ruizhi</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh 2</span><br><span class="line">Love you</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-case-语句"><a href="#2-case-语句" class="headerlink" title="2. case 语句"></a>2. case 语句</h4><ol>
<li>基本语法：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">case $变量名 in</span><br><span class="line">  &quot;值1&quot;)</span><br><span class="line">    ...</span><br><span class="line">  ;;</span><br><span class="line">  &quot;值2&quot;)</span><br><span class="line">    ...</span><br><span class="line">  ;;</span><br><span class="line">  *) #默认值</span><br><span class="line">    ...</span><br><span class="line">  ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure></li>
<li>实例<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  1 #!/bin/bash</span><br><span class="line">  2 case $1 in</span><br><span class="line">  3 1)</span><br><span class="line">  4     echo &quot;Ruizhi&quot;</span><br><span class="line">  5 ;;</span><br><span class="line">  6 2)</span><br><span class="line">  7     echo &quot;Zhijie&quot;</span><br><span class="line">  8 ;;</span><br><span class="line">  9 *)</span><br><span class="line"> 10     echo &quot;I LOVE YOU&quot;</span><br><span class="line"> 11 ;;</span><br><span class="line"> 12 esac</span><br><span class="line"> </span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh 1</span><br><span class="line">Ruizhi</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh 2</span><br><span class="line">Zhijie</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh we</span><br><span class="line">I LOVE YOU</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="3-for-循环"><a href="#3-for-循环" class="headerlink" title="3. for 循环"></a>3. for 循环</h4><ol>
<li>基本语法<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for(( ; ; ))</span><br><span class="line">  do </span><br><span class="line">    ...</span><br><span class="line">  done</span><br><span class="line">或者</span><br><span class="line">for 变量 in 值1, 值2, 值3...</span><br><span class="line">do </span><br><span class="line">  ...</span><br><span class="line">done</span><br></pre></td></tr></table></figure></li>
<li>实例<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1 #!/bin/bash</span><br><span class="line">2 s=0</span><br><span class="line">3 for((i=1;i&lt;=10;i++))</span><br><span class="line">4 do</span><br><span class="line">5   s=$[$s+$i]</span><br><span class="line">6 done</span><br><span class="line">7 echo $s #55</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  1 #!/bin/bash</span><br><span class="line">  2 for i in $*</span><br><span class="line">  3 do </span><br><span class="line">  4     echo &quot;I am $i&quot;</span><br><span class="line">  5 done</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh Ruizhi Zhijie Jack</span><br><span class="line">I am Ruizhi</span><br><span class="line">I am Zhijie</span><br><span class="line">I am Jack</span><br></pre></td></tr></table></figure>
$@ 与 $*的区别<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  1 #!/bin/bash</span><br><span class="line">  2 for i in &quot;$*&quot;</span><br><span class="line">  3 do </span><br><span class="line">  4     echo &quot;I am $i&quot;</span><br><span class="line">  5 done</span><br><span class="line">  6 for i in &quot;$@&quot;</span><br><span class="line">  7 do</span><br><span class="line">  8     echo &quot;I am $i&quot;</span><br><span class="line">  9 done</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh Ruizhi Zhijie Jack</span><br><span class="line">I am Ruizhi Zhijie Jack</span><br><span class="line">I am Ruizhi</span><br><span class="line">I am Zhijie</span><br><span class="line">I am Jack</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="4-while-循环"><a href="#4-while-循环" class="headerlink" title="4. while 循环"></a>4. while 循环</h4><ol>
<li>基本语法<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while [ condition ]</span><br><span class="line">do </span><br><span class="line">  ...</span><br><span class="line">done</span><br></pre></td></tr></table></figure></li>
<li>实例<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1 #!/bin/bash</span><br><span class="line">2 s=0</span><br><span class="line">3 i=1</span><br><span class="line">4 while [ $i -lt 100 ]</span><br><span class="line">5 do</span><br><span class="line">6     s=$[$s+$i]</span><br><span class="line">7     i=$[$i+1]</span><br><span class="line">8 done</span><br><span class="line">9 echo $s #4950</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="7-read-读取控制台输入"><a href="#7-read-读取控制台输入" class="headerlink" title="7. read 读取控制台输入"></a>7. read 读取控制台输入</h2><h4 id="1-基本语法-2"><a href="#1-基本语法-2" class="headerlink" title="1. 基本语法"></a>1. 基本语法</h4><p>read(选项)(参数)</p>
<ol>
<li>选项: <br> <code>-p</code>： 指定读取值时的提示符<br> <code>-t</code>: 指定读取值等待的时长(秒)</li>
<li>参数 <br> 变量: 指定读取值的变量</li>
</ol>
<h4 id="2-实例"><a href="#2-实例" class="headerlink" title="2. 实例"></a>2. 实例</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  1 #!/bin/bash</span><br><span class="line">  2 read -t 7 -p &quot;Enter your name in 7 Sec&quot; NAME# NAME是输入的存储的位置</span><br><span class="line">  3 echo $NAME</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh #7秒内没有输入</span><br><span class="line">Enter your name in 7 Sec</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % sh helloword.sh</span><br><span class="line">Enter your name in 7 SecRuizhi Zhang</span><br><span class="line">Ruizhi Zhang</span><br></pre></td></tr></table></figure>

<h2 id="8-函数"><a href="#8-函数" class="headerlink" title="8. 函数"></a>8. 函数</h2><h4 id="1-系统函数"><a href="#1-系统函数" class="headerlink" title="1. 系统函数"></a>1. 系统函数</h4><ol>
<li>basename: <code>basename[string/pathname][suffix]</code> basename 命令会删掉最后一个<code>/</code>前的的所有字符，包括<code>/</code>. <ol>
<li>选项： suffix 为后缀，如果suffix 被指定，basename 会将pathname 或string 中的suffix删去</li>
<li>实例：  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % basename /Users/ruizhizhang/Documents/Ruizhi_test.txt </span><br><span class="line">Ruizhi_test.txt</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % basename /Users/ruizhizhang/Documents/Ruizhi_test.txt .txt</span><br><span class="line">Ruizhi_test </span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>dirname: <code>dirname 文件绝对路径</code> 从给定的包含绝对路径的文件名去除文件名 (非目录的部分), 然后返回剩下的路径(目录部分)<ol>
<li>实例 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % dirname /Users/ruizhizhang/Documents/Ruizhi_test.txt </span><br><span class="line">/Users/ruizhizhang/Documents </span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h4 id="2-自定义函数"><a href="#2-自定义函数" class="headerlink" title="2. 自定义函数"></a>2. 自定义函数</h4><ol>
<li>基本语法 <br><code>[]</code>的意思是，里面的东西可以选填<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[function] funname[()]</span><br><span class="line">&#123;</span><br><span class="line">  Action;</span><br><span class="line">  [return int;]</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
<li>注意事项<ol>
<li>必须在调用函数地方之前先声明函数，shell 脚本是逐行运行， 不会像其他语言，先编译</li>
<li>函数返回值只能通过<code>$?</code>获取. 可以显性得加 <code>return</code>返回，如果不加，将以最后一条命令运行结果作为返回值。<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> 1 #!/bin/bash</span><br><span class="line"> 2 function sum()</span><br><span class="line"> 3 &#123;</span><br><span class="line"> 4     s=0;</span><br><span class="line"> 5     s=$[$1+$2]</span><br><span class="line"> 6     return $s</span><br><span class="line"> 7 &#125;</span><br><span class="line"> 8 read -p &quot;input your parameter1:&quot; P1</span><br><span class="line"> 9 read -p &quot;input your p2:&quot; P2</span><br><span class="line">10 sum $P1 $P2</span><br><span class="line">11 echo $?</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="9-shell-工具"><a href="#9-shell-工具" class="headerlink" title="9. shell 工具"></a>9. shell 工具</h2><h4 id="1-cut"><a href="#1-cut" class="headerlink" title="1. cut"></a>1. cut</h4><ol>
<li>基本语法<br><code>cut[选项参数] filename</code>： 说明，默认的分隔符是制表符<ol>
<li><code>-f</code>: 列号，提取第几列</li>
<li><code>-d</code>: 分隔符， 按照指定分隔符分割列</li>
</ol>
</li>
<li>实例<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cut -d &quot; &quot; -f 1 a.txt # 以空格为分隔符，分割文件，然后取第一列</span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % echo $PATH</span><br><span class="line">/Users/ruizhizhang/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin</span><br><span class="line"><span class="meta">#</span><span class="language-bash">选取PATH 变量值第二个<span class="string">&quot;:&quot;</span>开始后的所有路径</span></span><br><span class="line">ruizhizhang@Ruizhi-Zhangs-MacBook-Pro PYTHON % echo $PATH | cut -d : -f 3- </span><br><span class="line">/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-sed"><a href="#2-sed" class="headerlink" title="2. sed"></a>2. sed</h4><ol>
<li>基本语法<br><code>sed[选项参数] &#39;command&#39; filename</code>: sed 是一种流编辑器，一次处理一行内容。处理时，把当前处理的行存储在临时<br>缓存区中，称为”模块控件”。接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断<br>重复，直到文件末尾。文件内容并未改变</li>
<li>选项参数<ol>
<li><code>-e</code> 有多个命令执行时，要用到’-e’</li>
</ol>
</li>
<li>命令功能描述<ol>
<li><code>a</code> 新增，a 的后面可以接字符串，在下一行出现</li>
<li><code>d</code> 删除</li>
<li><code>s</code> 查找并替换</li>
</ol>
</li>
<li>实例<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed &quot;2a mei nv&quot; a.txt # 将mei nv 插入到a.txt 的二行下面，并打印。 (a.txt 不变)</span><br><span class="line">sed &quot;/wo/d&quot; a.txt #删除a.txt中包含&#x27;wo&#x27;的行全部删除，并打印</span><br><span class="line">sed &quot;s/wo/ni/g&quot; sed.txt # 将&#x27;wo&#x27; 全部替换为&#x27;ni&#x27;. </span><br><span class="line">sed -e &quot;2d&quot; -e &quot;s/wo/ni/g&quot; a.txt # 将第二行删除，并将&#x27;wo&#x27;替换为&#x27;ni&#x27;。 </span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="3-awk"><a href="#3-awk" class="headerlink" title="3. awk"></a>3. awk</h4><ol>
<li>基本用法<br><code>awk[选项参数] &#39;pattern1&#123;action1&#125; pattern2&#123;action2&#125;...&#39; filename</code>: 一个强大的文本分析工具，把文本逐行读入，以空格为<br>默认分隔符将每行切片，切开的部分在进行分析处理。<ol>
<li><code>patten</code> 表示AWK在数据中查到的内容，就是匹配模式</li>
<li><code>action</code> 在找到匹配内容时所执行的一系列命令</li>
</ol>
</li>
<li>选项参数说明<ol>
<li><code>-F</code> 指定输入文件拆分隔符</li>
<li><code>-v</code> 赋值一个用户定义的变量。</li>
</ol>
</li>
<li>实例<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">None</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/18/shell-%E5%9F%BA%E7%A1%80/" data-id="cl0xdqveh0000x0uxaw4y0fw1" data-title="shell_基础" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-regex-正则表达" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/15/regex-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE/" class="article-date">
  <time class="dt-published" datetime="2022-03-16T04:24:14.000Z" itemprop="datePublished">2022-03-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/15/regex-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE/">regex 正则表达</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-正则表达式基础"><a href="#1-正则表达式基础" class="headerlink" title="1. 正则表达式基础"></a>1. 正则表达式基础</h2><p>regex好用但是难记， 诀窍就是多练 </p>
<ul>
<li><code>\d</code> 是匹配一个数字 </li>
<li><code>\d\d\d</code> 是匹配任意三个数字 &#x3D;&#x3D; <code>\d&#123;3&#125;</code></li>
<li><code>&#123;&#125;</code>中间填写数字可以让前面的东西其多次匹配</li>
<li><code>z&#123;2,5&#125;</code> z 可以重复2到5次</li>
<li>dot <code>.</code> 可以匹配任意字符, 但是不包括 \n</li>
<li><code>\.</code> 是用来匹配真正的 ‘.’, 同时<code>\?</code>去匹配真正的 ‘?’</li>
<li><code>...\.</code> 三个任意字符加一个’.’</li>
<li><code>&#39;*&#39;</code> 0或者多次重复</li>
<li><code>&#39;+&#39;</code> 1 或者多次重复</li>
<li><code>b？</code> 指的是前面的b可有可无(最多出现一次)</li>
<li><code>\D</code> 任意的非数字字符</li>
<li><code>[abc]</code> 匹配a or b or c</li>
<li><code>[^bd]og</code> og前面可以是除了b,d 以外的所有字符</li>
<li><code>^abc$</code> ^代表开头，$代表结尾。这里就是指明了abc为整个字符串</li>
<li><code>[a-z]</code> a到z 任意字符</li>
<li><code>\w</code> 任意的字母和数字 &#x3D;&#x3D; [A-Za-z0-9]</li>
<li><code>\W</code> 除了上述以外的所有字符</li>
<li><code>\s</code> 匹配空字符.可以是空格， \t, \r or \n.</li>
<li><code>\S</code> 匹配所有非空字符</li>
<li>Match Group: <code>（^file.*)\.pdf$</code> 下列示例中，只有前两个符合本正则表达式，同时，()里面相符的内容将会被<br>返回。 第一个返回的是’file_record_transcript’，第二个返回的是’file_1450_sb’。<ul>
<li>file_record_transcript.pdf</li>
<li>file_1450_sb.pdf</li>
<li>testfile_fake.pkf</li>
</ul>
</li>
<li>Nested Groups: <code>([a-zA-Z]&#123;3,4&#125;\s(\d&#123;4&#125;))</code> (()), 双层()。 这里我们所能获得的结果. 以第一组为例， 是 Jan<br>1987, 1987. <ul>
<li>Jan 1987</li>
<li>May 1969</li>
<li>Aug 2011</li>
</ul>
</li>
<li>Or condition: <code>I love (cat|dog)s</code><h2 id="2-re模块介绍"><a href="#2-re模块介绍" class="headerlink" title="2. re模块介绍"></a>2. re模块介绍</h2><h4 id="1-实例-一"><a href="#1-实例-一" class="headerlink" title="1. 实例 一"></a>1. 实例 一</h4>re.search 结果详解<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;foo123bar&quot;</span></span><br><span class="line">result = re.search(<span class="string">&quot;123&quot;</span>, s)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment">#&lt;re.Match object; span=(3, 6), match=&#x27;123&#x27;&gt;, span=(3,6)是 匹配的str 在原字符串中的位置</span></span><br><span class="line"><span class="built_in">print</span>(result.span()) <span class="comment"># (3, 6)</span></span><br><span class="line"><span class="built_in">print</span>(result.start()) <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">print</span>(result.end()) <span class="comment"># 6</span></span><br><span class="line"><span class="built_in">print</span>(result.string) <span class="comment"># foo123bar</span></span><br><span class="line"><span class="built_in">print</span>(result[<span class="number">0</span>]) <span class="comment"># 123</span></span><br></pre></td></tr></table></figure>
<h4 id="2-实例-二"><a href="#2-实例-二" class="headerlink" title="2. 实例 二"></a>2. 实例 二</h4>search是返回match的第一个，而不是所有<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;foo123bar&quot;</span></span><br><span class="line">result = re.search(<span class="string">&quot;.&quot;</span>, s)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment">#&lt;re.Match object; span=(0, 1), match=&#x27;f&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-实例-三"><a href="#3-实例-三" class="headerlink" title="3. 实例 三"></a>3. 实例 三</h4>无匹配结果<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;f123bar&quot;</span></span><br><span class="line">result = re.search(<span class="string">&quot;fo+&quot;</span>, s)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment">#None</span></span><br></pre></td></tr></table></figure>
<h4 id="4-实例-四"><a href="#4-实例-四" class="headerlink" title="4. 实例 四"></a>4. 实例 四</h4>group 分组<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;one, two, three&quot;</span></span><br><span class="line">result = re.search(<span class="string">&quot;(\w+), (\w+)&quot;</span>, s)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment">#&lt;re.Match object; span=(0, 8), match=&#x27;one, two&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(result.groups()) <span class="comment"># (&#x27;one&#x27;, &#x27;two&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(result.group()) <span class="comment"># one, two</span></span><br><span class="line"><span class="built_in">print</span>(result.group(<span class="number">0</span>)) <span class="comment"># one, two. 或者也可以用result[0]</span></span><br><span class="line"><span class="built_in">print</span>(result.group(<span class="number">1</span>)) <span class="comment"># one 或者用result[1]</span></span><br><span class="line"><span class="built_in">print</span>(result.group(<span class="number">2</span>)) <span class="comment"># two 或者用result[2]</span></span><br></pre></td></tr></table></figure>
<h4 id="5-实例-五"><a href="#5-实例-五" class="headerlink" title="5. 实例 五"></a>5. 实例 五</h4>给group 起名字,以及groupdict的使用<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;one, two, three&quot;</span></span><br><span class="line">result = re.search(<span class="string">&quot;(?P&lt;name1&gt;\w+), (?P&lt;zhijie&gt;\w+)&quot;</span>, s)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment">#&lt;re.Match object; span=(0, 8), match=&#x27;one, two&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(result.group(<span class="number">0</span>)) <span class="comment"># one, two. 或者也可以用result[0]</span></span><br><span class="line"><span class="built_in">print</span>(result.group(<span class="number">1</span>)) <span class="comment"># one 或者用result[1]</span></span><br><span class="line"><span class="built_in">print</span>(result.groupdict()) <span class="comment"># &#123;&#x27;name1&#x27;: &#x27;one&#x27;, &#x27;zhijie&#x27;: &#x27;two&#x27;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(result.groupdict()[<span class="string">&#x27;name1&#x27;</span>]) <span class="comment"># one</span></span><br></pre></td></tr></table></figure>
<h2 id="3-其他search相关的方法"><a href="#3-其他search相关的方法" class="headerlink" title="3. 其他search相关的方法"></a>3. 其他search相关的方法</h2><h4 id="1-re-match"><a href="#1-re-match" class="headerlink" title="1. re.match()"></a>1. re.match()</h4>re.match() 强制从开始进行匹配. 下面的实例中，虽然有数字，但是因为不是从开头就有的，所以结果是none<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;foo123bar&quot;</span></span><br><span class="line">b = re.match(<span class="string">&quot;\d+&quot;</span>,s)</span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment">#None</span></span><br></pre></td></tr></table></figure>
<h4 id="2-re-fullmatch"><a href="#2-re-fullmatch" class="headerlink" title="2. re.fullmatch()"></a>2. re.fullmatch()</h4>re.fullmatch(), 必须整个字符串都match 正则表达式. 下的实例因为不是整个字符串都是\d, 所以不match。 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.fullmatch(<span class="string">r&#x27;\d+&#x27;</span>, <span class="string">&#x27;123foo&#x27;</span>)) <span class="comment">#None</span></span><br></pre></td></tr></table></figure>
<h4 id="3-re-findall"><a href="#3-re-findall" class="headerlink" title="3. re.findall()"></a>3. re.findall()</h4>找到所有的match, 然后以列表的形式返回。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;foo123bar456&quot;</span></span><br><span class="line">b = re.findall(<span class="string">&quot;\d+&quot;</span>,s)</span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment">#[&#x27;123&#x27;, &#x27;456&#x27;]</span></span><br></pre></td></tr></table></figure>
后一组是在前一组结束的位置开始的。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;foo,123,bar,456&quot;</span></span><br><span class="line">b = re.findall(<span class="string">&quot;(\w+),(\w+)&quot;</span>,s)</span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment">#[(&#x27;foo&#x27;, &#x27;123&#x27;), (&#x27;bar&#x27;, &#x27;456&#x27;)]</span></span><br></pre></td></tr></table></figure>
<h4 id="4-re-complie"><a href="#4-re-complie" class="headerlink" title="4. re.complie"></a>4. re.complie</h4>compiles a regex into a regular expression object</li>
</ul>
<h2 id="4-正则表达中的替换"><a href="#4-正则表达中的替换" class="headerlink" title="4. 正则表达中的替换"></a>4. 正则表达中的替换</h2><h4 id="1-re-sub"><a href="#1-re-sub" class="headerlink" title="1. re.sub()"></a>1. re.sub()</h4><p>替换所有的matches, 然后返回结果</p>
<h4 id="2-re-subn"><a href="#2-re-subn" class="headerlink" title="2. re.subn()"></a>2. re.subn()</h4><p>和 re.sub()类似，但是不同点是也会返回替换的数目</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;foo,123,bar,456&quot;</span></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&#x27;\d+&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,s)) <span class="comment">#foo,#,bar,#</span></span><br><span class="line"><span class="built_in">print</span>(re.subn(<span class="string">&#x27;\d+&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,s)) <span class="comment">#(&#x27;foo,#,bar,#&#x27;, 2)</span></span><br></pre></td></tr></table></figure>
<h4 id="3-通过sub-进行位置转换"><a href="#3-通过sub-进行位置转换" class="headerlink" title="3. 通过sub 进行位置转换"></a>3. 通过sub 进行位置转换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&#x27;123abc465&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&quot;(\d+)[a-z]+(\d+)&quot;</span>, <span class="string">r&quot;\2abc\1&quot;</span>, s)) <span class="comment">#465abc123。 需要r进行转译</span></span><br></pre></td></tr></table></figure>
<h4 id="4-通过function-来进行替换"><a href="#4-通过function-来进行替换" class="headerlink" title="4. 通过function 来进行替换"></a>4. 通过function 来进行替换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">match_object</span>):</span><br><span class="line">    s = match_object.group(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> s.isdigit():</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(<span class="built_in">int</span>(s)*<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> s.upper()</span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&#x27;\w+&#x27;</span>,foo, <span class="string">&#x27;foo.10.bar.20.baz.30&#x27;</span>)) <span class="comment">#FOO.100.BAR.200.BAZ.300</span></span><br></pre></td></tr></table></figure>
<h4 id="5-通过count-来限制替换次数"><a href="#5-通过count-来限制替换次数" class="headerlink" title="5. 通过count 来限制替换次数"></a>5. 通过count 来限制替换次数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&#x27;\w+&#x27;</span>,foo, <span class="string">&#x27;foo.10.bar.20.baz.30&#x27;</span>,count=<span class="number">2</span>)) <span class="comment">#FOO.100.bar.20.baz.30</span></span><br></pre></td></tr></table></figure>
<h2 id="5-re中的split"><a href="#5-re中的split" class="headerlink" title="5. re中的split"></a>5. re中的split</h2><p>re.split(,,maxsplit&#x3D;0, flags&#x3D;0)<br>如下图所示，re的split比string 的split好用的多。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;foo,bar, baz,     corge&quot;</span></span><br><span class="line"><span class="built_in">print</span>(s.split(<span class="string">&#x27;,&#x27;</span>)) <span class="comment">#[&#x27;foo&#x27;, &#x27;bar&#x27;, &#x27; baz&#x27;, &#x27;     corge&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.split(<span class="string">&#x27;,\s*&#x27;</span>,s)) <span class="comment">#[&#x27;foo&#x27;, &#x27;bar&#x27;, &#x27;baz&#x27;, &#x27;corge&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.split(<span class="string">&#x27;,\s*&#x27;</span>,s, maxsplit=<span class="number">2</span>)) <span class="comment">#[&#x27;foo&#x27;, &#x27;bar&#x27;, &#x27;baz,     corge&#x27;]</span></span><br></pre></td></tr></table></figure>
<h2 id="6-flags-参数"><a href="#6-flags-参数" class="headerlink" title="6. flags 参数"></a>6. flags 参数</h2><h4 id="1-re-I"><a href="#1-re-I" class="headerlink" title="1.re.I"></a>1.re.I</h4><p>re.I: ignorecase. 在match的时候忽略大小写</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&quot;a+&quot;</span>, <span class="string">&quot;aaaAAA&quot;</span>,re.I)) <span class="comment">#&lt;re.Match object; span=(0, 6), match=&#x27;aaaAAA&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-re-M"><a href="#2-re-M" class="headerlink" title="2. re.M"></a>2. re.M</h4><p>re.M: Multiline. 将用\n隔开的字符串看做多行，而非一行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s=<span class="string">&#x27;foo\nbar\nbaz&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&quot;^foo&quot;</span>,s)) <span class="comment"># &lt;re.Match object; span=(0, 3), match=&#x27;foo&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&quot;^bar&quot;</span>,s)) <span class="comment"># None</span></span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&quot;^bar&quot;</span>,s,re.MULTILINE)) <span class="comment"># &lt;re.Match object; span=(4, 7), match=&#x27;bar&#x27;&gt;</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/15/regex-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE/" data-id="cl0t36f5v0000d4ux4gz9amvn" data-title="regex 正则表达" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JSON-基本知识" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/10/JSON-%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/" class="article-date">
  <time class="dt-published" datetime="2022-03-11T07:36:02.000Z" itemprop="datePublished">2022-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/10/JSON-%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/">JSON 基本知识</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="JSON-基础知识"><a href="#JSON-基础知识" class="headerlink" title="JSON 基础知识"></a>JSON 基础知识</h2><pre><code>JSON: JavaScript Object Notation （JavaScript物件表示法)
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/10/JSON-%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/" data-id="cl0pytamo00002oux47f5g3cb" data-title="JSON 基本知识" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Python-GUI" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/09/Python-GUI/" class="article-date">
  <time class="dt-published" datetime="2022-03-10T04:20:23.000Z" itemprop="datePublished">2022-03-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/09/Python-GUI/">Python GUI</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="tkinter"><a href="#tkinter" class="headerlink" title="tkinter"></a>tkinter</h1><h2 id="1-创建窗体，label-button-amp-信息弹窗"><a href="#1-创建窗体，label-button-amp-信息弹窗" class="headerlink" title="1. 创建窗体，label, button &amp; 信息弹窗"></a>1. 创建窗体，label, button &amp; 信息弹窗</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">import</span> tkinter.messagebox</span><br><span class="line"><span class="comment">#定义按钮的点击事件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">btnclick</span>():</span><br><span class="line">    tk.messagebox.showinfo(<span class="string">&quot;Ruizhi&quot;</span>,<span class="string">&quot;you are so great&quot;</span>) <span class="comment">#信息弹窗</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    window = tk.Tk()</span><br><span class="line">    <span class="comment"># 宽x高 + 水平方向的位置 + 垂直方向的位置</span></span><br><span class="line">    window.geometry(<span class="string">&quot;400x300+333+222&quot;</span>) <span class="comment">#400x300窗口大小, 而333, 222是出现的位置的坐标</span></span><br><span class="line">    window.title(<span class="string">&quot;Ruizhi&#x27;s GUI&quot;</span>) <span class="comment">#add title</span></span><br><span class="line">    <span class="comment">#创建label</span></span><br><span class="line">    lbl=tk.Label(window,text=<span class="string">&quot;Ruizhi, Zhang&quot;</span>) <span class="comment">#第一个指定parent，</span></span><br><span class="line">    lbl.pack() <span class="comment">#布局label。 或者用grid也行， 两者选一就可以</span></span><br><span class="line">    <span class="comment">#创建button</span></span><br><span class="line">    btn=tk.Button(window, text=<span class="string">&quot;点击按钮&quot;</span>,command=btnclick) <span class="comment">#注意，这里不能用btnclick(),必须只填写btnclick.</span></span><br><span class="line">    btn.pack() <span class="comment">#同lbl</span></span><br><span class="line">    window.mainloop() <span class="comment">#这是一个死循环，从而一直监听window里面的各种操作</span></span><br></pre></td></tr></table></figure>
<h2 id="2-grid-布局，entry-输入，-创建string-类型的变量-StringVar"><a href="#2-grid-布局，entry-输入，-创建string-类型的变量-StringVar" class="headerlink" title="2. grid 布局，entry 输入， 创建string 类型的变量(StringVar)"></a>2. grid 布局，entry 输入， 创建string 类型的变量(StringVar)</h2><p>grid 布局，类似于excel表格</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> messagebox <span class="keyword">as</span> msgbox</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">btnOk_click</span>():</span><br><span class="line">    <span class="comment">#这里也可以用绑定的对象 varName, varPass.需要注意的是，StringVar 类型的写和读分别是用set() and get()</span></span><br><span class="line">    <span class="keyword">if</span> entryName.get() == <span class="string">&quot;Ruizhi&quot;</span> <span class="keyword">and</span> entryPass.get()==<span class="string">&quot;Zhijie&quot;</span>:</span><br><span class="line">        mainWin=tk.Tk();<span class="comment">#创建新的主窗体</span></span><br><span class="line">        mainWin.geometry(<span class="string">&quot;400x300+400+300&quot;</span>)</span><br><span class="line">        mainWin.title(<span class="string">&quot;I LOVE YOU&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        msgbox.showinfo(<span class="string">&quot;消息&quot;</span>, <span class="string">&quot;用户名或密码不正确&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">btnReset_click</span>(): <span class="comment">#针对点击按钮发出的事件</span></span><br><span class="line">    varName.<span class="built_in">set</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    varPass.<span class="built_in">set</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">loginwin = tk.Tk()</span><br><span class="line">loginwin.title(<span class="string">&#x27;秘密基地&#x27;</span>)</span><br><span class="line">loginwin.geometry(<span class="string">&quot;400x150+500+300&quot;</span>)</span><br><span class="line">lblname=tk.Label(loginwin,text=<span class="string">&quot;用户名&quot;</span>)</span><br><span class="line">lblname.grid(row=<span class="number">0</span>, column=<span class="number">0</span>, ipadx=<span class="number">10</span>,ipady=<span class="number">10</span>) <span class="comment">#columnspan =&gt; 列合并数量。 rowspan +&gt; 行合并,</span></span><br><span class="line"> <span class="comment">#ipadx水平空开的内边距。ipady =&gt; 竖直空开的内边距。 padx, pady =&gt; 外边距</span></span><br><span class="line">varName=tk.StringVar() <span class="comment">#创建string 类型的变量对象</span></span><br><span class="line">entryName=tk.Entry(loginwin,textvariable=varName)<span class="comment">#创建当前行输入框. 通过entryName.get()来获取输入的信息</span></span><br><span class="line"><span class="comment">#textvariable=varName， 是将两者相绑定。</span></span><br><span class="line">entryName.grid(row=<span class="number">0</span>, column=<span class="number">1</span>,columnspan=<span class="number">2</span>)<span class="comment">#占两列</span></span><br><span class="line"></span><br><span class="line">lblpass=tk.Label(loginwin,text=<span class="string">&quot;密码&quot;</span>)</span><br><span class="line">lblpass.grid(row=<span class="number">1</span>, column=<span class="number">0</span>) <span class="comment">#columnspan =&gt; 列合并数量。 rowspan +&gt; 行合并</span></span><br><span class="line">varPass=tk.StringVar() <span class="comment">#闯将string 类型的变量对象</span></span><br><span class="line">entryPass=tk.Entry(loginwin, show=<span class="string">&#x27;*&#x27;</span>,textvariable=varPass)<span class="comment">#创建当前行输入框, 将输入的文字显示为*</span></span><br><span class="line">entryPass.grid(row=<span class="number">1</span>, column=<span class="number">1</span>,columnspan=<span class="number">2</span>)<span class="comment">#占两列</span></span><br><span class="line">    <span class="comment">#登录按钮</span></span><br><span class="line">btnOk=tk.Button(loginwin,text=<span class="string">&quot;登录&quot;</span>,width=<span class="number">8</span>,command=btnOk_click) <span class="comment">#width是按钮的宽度</span></span><br><span class="line">btnOk.grid(row=<span class="number">2</span>, column=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#重置按钮</span></span><br><span class="line"></span><br><span class="line">btnReset = tk.Button(loginwin,text=<span class="string">&quot;重置&quot;</span>,width=<span class="number">8</span>,command=btnReset_click)</span><br><span class="line">btnReset.grid(row=<span class="number">2</span>, column=<span class="number">2</span>)</span><br><span class="line">loginwin.mainloop()</span><br></pre></td></tr></table></figure>
<h2 id="3-gui窗体居中显示"><a href="#3-gui窗体居中显示" class="headerlink" title="3.gui窗体居中显示"></a>3.gui窗体居中显示</h2><p>通过获取屏幕宽度和高度，计算获得窗体居中位置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">window=tk.Tk()</span><br><span class="line"><span class="comment">#获取屏幕宽度</span></span><br><span class="line">ws=window.winfo_screenwidth();</span><br><span class="line"><span class="comment">#获取屏幕高度</span></span><br><span class="line">hs=window.winfo_screenheight()</span><br></pre></td></tr></table></figure>
<h2 id="4-label-水平填充-和-side的使用"><a href="#4-label-水平填充-和-side的使用" class="headerlink" title="4. label 水平填充 和 side的使用"></a>4. label 水平填充 和 side的使用</h2><p>side: 使得控件脱离正常流</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">lbl=tk.Label(window,text=<span class="string">&quot;Ruizhi&quot;</span>)</span><br><span class="line">lbl.pack(fill=<span class="string">&quot;x&quot;</span>)<span class="comment">#水平填充</span></span><br><span class="line"><span class="comment">#================================#</span></span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line">form1 = tk.Tk()</span><br><span class="line">form1.title(<span class="string">&quot;Ruizhi is here&quot;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+300+200&quot;</span>)</span><br><span class="line">form1[<span class="string">&quot;background&quot;</span>] = <span class="string">&quot;black&quot;</span> <span class="comment">#设置背景色为黑色</span></span><br><span class="line">lbl1 = tk.Label(form1,text=<span class="string">&quot;Zhijie&quot;</span>,bg=<span class="string">&quot;blue&quot;</span>,fg=<span class="string">&quot;white&quot;</span>)<span class="comment">#设置背景颜色和字体颜色</span></span><br><span class="line">lbl1.pack(fill=<span class="string">&#x27;x&#x27;</span>, ipady=<span class="number">10</span>)</span><br><span class="line">lbl2 = tk.Label(form1,text=<span class="string">&quot;B站&quot;</span>,bg=<span class="string">&quot;pink&quot;</span>,fg=<span class="string">&quot;white&quot;</span>)</span><br><span class="line">lbl2.pack(fill=<span class="string">&#x27;y&#x27;</span>, ipady=<span class="number">10</span>,side=<span class="string">&quot;left&quot;</span>) <span class="comment">#只有当side是top/bottom的时候，fill=&#x27;x&#x27;才有用，</span></span><br><span class="line"><span class="comment"># 只有当side是left/right时，fill=&#x27;y&#x27; 才有用</span></span><br></pre></td></tr></table></figure>
<h2 id="5-gui-图片导入"><a href="#5-gui-图片导入" class="headerlink" title="5. gui 图片导入"></a>5. gui 图片导入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageTk,Image <span class="comment">#这里两者之间是逗号</span></span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line">form1=tk.Tk()</span><br><span class="line">form1.title(<span class="string">&quot;Ruizhi&quot;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+200+200&quot;</span>)</span><br><span class="line">pic1=Image.<span class="built_in">open</span>(<span class="string">&quot;./Background/wp2730945-zelda-iphone-wallpaper.jpg&quot;</span>) <span class="comment">#载入图片</span></span><br><span class="line">photo1=ImageTk.PhotoImage(pic1)<span class="comment">#转为tk适合的图片格式</span></span><br><span class="line">lbl=tk.Label(form1,image=photo1) <span class="comment">#将图片应用到label</span></span><br><span class="line">lbl.pack()</span><br><span class="line">form1.mainloop()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="6-python-键盘的调用"><a href="#6-python-键盘的调用" class="headerlink" title="6.python 键盘的调用"></a>6.python 键盘的调用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#键盘打字统计</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">printWords</span>(<span class="params">e</span>): <span class="comment">#这里一定要传入一个event, 才能调用键盘事件。</span></span><br><span class="line">    str1.<span class="built_in">set</span>(<span class="string">&quot;统计数字：%d&quot;</span>%(<span class="built_in">len</span>(entry1.get()))) <span class="comment">#entry可以通过entry.get()获取输入</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line">form1=tk.Tk()</span><br><span class="line">form1.title(<span class="string">&quot;Ruizhi&quot;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+200+200&quot;</span>)</span><br><span class="line">lbl=tk.Label(form1,text=<span class="string">&quot;请输入&quot;</span>)</span><br><span class="line">lbl.grid(row=<span class="number">0</span>,column=<span class="number">0</span>)</span><br><span class="line">entry1=tk.Entry(form1)</span><br><span class="line">entry1.grid(row=<span class="number">0</span>,column=<span class="number">1</span>, columnspan=<span class="number">2</span>)</span><br><span class="line">entry1.bind(<span class="string">&quot;&lt;Key&gt;&quot;</span>,printWords) <span class="comment">#bind 对控件进行绑定</span></span><br><span class="line"></span><br><span class="line">str1=tk.StringVar()</span><br><span class="line">lbl2=tk.Label(form1,textvariable=str1)</span><br><span class="line">lbl2.grid(row=<span class="number">1</span>, column=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">form1.mainloop()</span><br></pre></td></tr></table></figure>
<h2 id="7-文本框"><a href="#7-文本框" class="headerlink" title="7. 文本框"></a>7. 文本框</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># txt1=tk.Text(form1) #文本框</span></span><br><span class="line"><span class="comment"># txt1.pack()</span></span><br><span class="line"><span class="comment"># txt1.insert(tk.END,&quot;I am Ruizhi!!&quot;) #文字将会写入文本框，此文字可以在文本框中删除</span></span><br></pre></td></tr></table></figure>
<h2 id="8-RadioButton-单选框-和-复选框-checkbutton"><a href="#8-RadioButton-单选框-和-复选框-checkbutton" class="headerlink" title="8. RadioButton 单选框 和 复选框 checkbutton"></a>8. RadioButton 单选框 和 复选框 checkbutton</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注意的点：</span></span><br><span class="line"><span class="comment">#多个选项需要绑定同一个变量.比如说下面，第1，2个选项和第三个选项的variable不同， 这使得这三个单选变为两组</span></span><br><span class="line"><span class="comment">#command是否一样并无关系</span></span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ShowSelect</span>():</span><br><span class="line">    str1.<span class="built_in">set</span>(<span class="string">&quot;显示选中项: %s&quot;</span>%(strR1.get()))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ShowSelect2</span>():</span><br><span class="line">    str1.<span class="built_in">set</span>(<span class="string">&quot;现在是2&quot;</span>)</span><br><span class="line">form1 = tk.Tk()</span><br><span class="line">form1.title(<span class="string">&quot;Ruizhi Zhang&quot;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+200+200&quot;</span>)</span><br><span class="line">strR1=tk.StringVar()</span><br><span class="line">strR2=tk.StringVar()</span><br><span class="line">strR1.<span class="built_in">set</span>(<span class="string">&quot;Ruizhi&quot;</span>) <span class="comment">#这里设定为Ruizhi, 则开始时， 第一个选中。如果为空， 则两者都选中。如果为其他， 如 &#x27;1&#x27;,则两者都不选中。</span></span><br><span class="line">r1 = tk.Radiobutton(form1, text=<span class="string">&quot;Ruizhi&quot;</span>, value=<span class="string">&quot;I am here&quot;</span>, variable=strR1,command=ShowSelect)</span><br><span class="line"><span class="comment">#value 为variable的值，value是不可缺少的。缺少的时候无法选择</span></span><br><span class="line">r1.pack(anchor=<span class="string">&quot;w&quot;</span>) <span class="comment">#使其居左</span></span><br><span class="line">r2 = tk.Radiobutton(form1, text=<span class="string">&quot;Zhijie&quot;</span>,value=<span class="string">&quot;my lover&quot;</span>, variable=strR1,command=ShowSelect)</span><br><span class="line">r2.pack(anchor=<span class="string">&quot;w&quot;</span>) <span class="comment">#使其居左</span></span><br><span class="line">r3 = tk.Radiobutton(form1, text=<span class="string">&quot;GoGo&quot;</span>,value=<span class="string">&quot;Go Go Go&quot;</span>, variable=strR2,command=ShowSelect2)</span><br><span class="line">r3.pack(anchor=<span class="string">&quot;w&quot;</span>) <span class="comment">#使其居左</span></span><br><span class="line"></span><br><span class="line">str1=tk.StringVar()</span><br><span class="line">str1.<span class="built_in">set</span>(<span class="string">&quot;显示选中项: &quot;</span>)</span><br><span class="line">lbl=tk.Label(form1,textvariable=str1)</span><br><span class="line">lbl.pack(side=<span class="string">&#x27;left&#x27;</span>,anchor=<span class="string">&#x27;n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">form1.mainloop()</span><br><span class="line"><span class="comment">#=================================#</span></span><br><span class="line"><span class="comment">#onvalue，设置选中时的值，</span></span><br><span class="line"><span class="comment">#offvalue,设置未选中的值</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">showckselect</span>():</span><br><span class="line">    <span class="keyword">if</span>(varck1.get()==<span class="number">1</span>):</span><br><span class="line">        varlbl1.<span class="built_in">set</span>(ck1.cget(<span class="string">&quot;text&quot;</span>)) <span class="comment">#通过cget(&quot;text&quot;)获取对应的文本值</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        varlbl1.<span class="built_in">set</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line">form1=tk.Tk()</span><br><span class="line">form1.title(<span class="string">&#x27;RUizhi&#x27;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+300+200&quot;</span>)</span><br><span class="line">varck1=tk.IntVar() <span class="comment">#和StringVar类似</span></span><br><span class="line">ck1 = tk.Checkbutton(form1, text=<span class="string">&quot;愿望一： 实现一个小目标&quot;</span>,onvalue=<span class="number">1</span>, offvalue=<span class="number">0</span>, variable=varck1,command=showckselect)</span><br><span class="line">ck1.pack(anchor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"></span><br><span class="line">varlbl1 = tk.StringVar()</span><br><span class="line">lbl1 = tk.Label(form1,textvariable=varlbl1)</span><br><span class="line">lbl1.pack(anchor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"></span><br><span class="line">form1.mainloop()</span><br></pre></td></tr></table></figure>
<h2 id="9-滑块scale控件"><a href="#9-滑块scale控件" class="headerlink" title="9. 滑块scale控件"></a>9. 滑块scale控件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myset</span>(<span class="params">value</span>):</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line">form1=tk.Tk()</span><br><span class="line">form1.title(<span class="string">&quot;Ruizhi&quot;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+300+200&quot;</span>)</span><br><span class="line"><span class="comment">#载入滑块.默认情况下是垂直的滑块，默认范围是0-100</span></span><br><span class="line">sc1 = tk.Scale(form1,orient=tk.HORIZONTAL, label=<span class="string">&quot;颜值&quot;</span>,length=<span class="number">200</span>, from_=<span class="number">30</span>, to = <span class="number">60</span>,tickinterval=<span class="number">5</span>, resolution=<span class="number">5</span>,command=myset)</span><br><span class="line"><span class="comment">#orient 将滑块模组调整为横向. length只是改变滑块的长度，而没有改变范围. from_, to, 是开始和结束.</span></span><br><span class="line"><span class="comment"># tickinterval是下面刻度的间距, 但还是每次可以只增加1. resolution =5， 则，每次只能增加5.command将会返回当前的值。</span></span><br><span class="line">sc1.pack()</span><br><span class="line">form1.mainloop()</span><br></pre></td></tr></table></figure>
<h2 id="10-Listbox-控件"><a href="#10-Listbox-控件" class="headerlink" title="10. Listbox 控件"></a>10. Listbox 控件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Listbox控件增加</span></span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">btn1_Click</span>():</span><br><span class="line">    lbox.insert(tk.END,ent1.get()) <span class="comment">#添加一项到listbox</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">btn2_Click</span>():</span><br><span class="line">    lbox.delete(index)</span><br><span class="line"><span class="comment">#listbox点击事件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lbox_Click</span>(<span class="params">evnt</span>):</span><br><span class="line">     w=evnt.widget; <span class="comment">#获取当前所选的控件</span></span><br><span class="line">   <span class="comment"># print(w.curselection()) #获取当前选中项的索引，以元组的形式返回 输出的结果的形式：(1,)</span></span><br><span class="line">     <span class="keyword">global</span> index <span class="comment">#这里声明了一个全局变量</span></span><br><span class="line">     index = w.curselection()</span><br><span class="line"></span><br><span class="line">form1 = tk.Tk()</span><br><span class="line">form1.title(<span class="string">&quot;Ruizhi&quot;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+200+200&quot;</span>)</span><br><span class="line">lbl = tk.Label(form1,text=<span class="string">&quot;测试显示区&quot;</span>)</span><br><span class="line">lbl.pack(anchor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="comment">#开始载入listbox控件</span></span><br><span class="line">lbox = tk.Listbox(form1) <span class="comment">#不存在command=选项， 只能通过bind()</span></span><br><span class="line">lbox.bind(<span class="string">&quot;&lt;&lt;ListboxSelect&gt;&gt;&quot;</span>,lbox_Click) <span class="comment">#注意格式</span></span><br><span class="line">lbox.pack(anchor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="comment">#载入单行文本框</span></span><br><span class="line">ent1=tk.Entry(form1)</span><br><span class="line">ent1.pack(anchor=<span class="string">&#x27;w&#x27;</span>,side=<span class="string">&quot;left&quot;</span>)</span><br><span class="line"><span class="comment">#button</span></span><br><span class="line">btn1 = tk.Button(form1,text=<span class="string">&quot;增加&quot;</span>,command=btn1_Click)</span><br><span class="line">btn1.pack(anch=<span class="string">&#x27;w&#x27;</span>, side=<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line">btn2 = tk.Button(form1, text=<span class="string">&quot;删除&quot;</span>,command=btn2_Click)</span><br><span class="line">btn2.pack(anch=<span class="string">&#x27;w&#x27;</span>, side=<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line">form1.mainloop()</span><br></pre></td></tr></table></figure>
<h2 id="11-菜单栏的开发"><a href="#11-菜单栏的开发" class="headerlink" title="11. 菜单栏的开发"></a>11. 菜单栏的开发</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fileMenu_NewProjectClick</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;fff&#x27;</span>)</span><br><span class="line">form1 = tk.Tk()</span><br><span class="line">form1.title(<span class="string">&quot;Ruizhi&quot;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+300+200&quot;</span>)</span><br><span class="line"> <span class="comment">#创建菜单栏</span></span><br><span class="line">menubar = tk.Menu(form1)</span><br><span class="line"> <span class="comment">#创建子项</span></span><br><span class="line">fileMenu=tk.Menu(menubar) <span class="comment">#作为menubar的一项</span></span><br><span class="line">fileMenu.add_command(label=<span class="string">&quot;新建项目...&quot;</span>,command=fileMenu_NewProjectClick)</span><br><span class="line">fileMenu.add_command(label=<span class="string">&quot;新建...&quot;</span>)</span><br><span class="line">fileMenu.add_command(label=<span class="string">&quot;打开...&quot;</span>)</span><br><span class="line">fileMenu.add_command(label=<span class="string">&quot;退出&quot;</span>)</span><br><span class="line"></span><br><span class="line">menubar.add_cascade(label=<span class="string">&quot;文件&quot;</span>, menu=fileMenu) <span class="comment">#指定可以打开的子菜单. cascade是级联的意思</span></span><br><span class="line">menubar.add_cascade(label=<span class="string">&quot;编程&quot;</span>)</span><br><span class="line">menubar.add_cascade(label=<span class="string">&quot;视图&quot;</span>)</span><br><span class="line"></span><br><span class="line">form1.config(menu=menubar) <span class="comment">#需要config 才能用</span></span><br><span class="line">form1.mainloop()</span><br></pre></td></tr></table></figure>
<h2 id="12-对话框的多种样式"><a href="#12-对话框的多种样式" class="headerlink" title="12. 对话框的多种样式"></a>12. 对话框的多种样式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">import</span> tkinter.messagebox <span class="keyword">as</span> msgbox</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">btn1_Click</span>():</span><br><span class="line">    msgbox.showinfo(<span class="string">&quot;检测回馈&quot;</span>, <span class="string">&quot;你很帅&quot;</span>) <span class="comment">#第一个是标题，第二个是内容</span></span><br><span class="line">    msgbox.showwarning(<span class="string">&quot;检测警告&quot;</span>,<span class="string">&quot;前方有高能&quot;</span>)</span><br><span class="line">    msgbox.showerror(<span class="string">&quot;紧急&quot;</span>,<span class="string">&quot;不要离开我！&quot;</span>)</span><br><span class="line"><span class="comment">#互动形式</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">btn2_Click</span>():</span><br><span class="line">    <span class="keyword">if</span>(msgbox.askyesnocancel(<span class="string">&quot;魔镜说&quot;</span>,<span class="string">&quot;我是世界上最好看的人吗&quot;</span>)==<span class="literal">True</span>): <span class="comment">#打开一个有三个选项的对话框，分别是yes, no, cancel</span></span><br><span class="line">        msgbox.showinfo(<span class="string">&quot;回复&quot;</span>, <span class="string">&quot;是的，你是!&quot;</span>)</span><br><span class="line">form1=tk.Tk()</span><br><span class="line">form1.title(<span class="string">&quot;Ruizhi&quot;</span>)</span><br><span class="line">form1.geometry(<span class="string">&quot;400x300+300+300&quot;</span>)</span><br><span class="line"></span><br><span class="line">btn1=tk.Button(form1,text=<span class="string">&quot;信息形式&quot;</span>, command=btn1_Click)</span><br><span class="line">btn1.pack(pady=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">btn2=tk.Button(form1,text=<span class="string">&quot;互动信息&quot;</span>, command=btn2_Click)</span><br><span class="line">btn2.pack()</span><br><span class="line"></span><br><span class="line">form1.mainloop()</span><br></pre></td></tr></table></figure>
<h2 id="13-创造计算器"><a href="#13-创造计算器" class="headerlink" title="13.创造计算器"></a>13.创造计算器</h2><p>鼠标单击事件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">btn_click</span>(<span class="params">evnt</span>):</span><br><span class="line">    str1 = evnt.widget.configure().get(<span class="string">&#x27;text&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> str1 == <span class="string">&quot;=&quot;</span>:</span><br><span class="line">        result = <span class="built_in">eval</span>(StrVar_Entry.get())</span><br><span class="line">        StrVar_Entry.<span class="built_in">set</span>(StrVar_Entry.get() + evnt.widget.configure().get(<span class="string">&#x27;text&#x27;</span>)[-<span class="number">1</span>] + <span class="built_in">str</span>(result))</span><br><span class="line">    <span class="keyword">elif</span> str1 == <span class="string">&quot;清空&quot;</span>:</span><br><span class="line">        StrVar_Entry.<span class="built_in">set</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> str1 == <span class="string">&quot;退格&quot;</span>:</span><br><span class="line">        StrVar_Entry.<span class="built_in">set</span>(StrVar_Entry.get()[<span class="number">0</span>:-<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        StrVar_Entry.<span class="built_in">set</span>(StrVar_Entry.get() + evnt.widget.configure().get(<span class="string">&#x27;text&#x27;</span>)[-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">window = tk.Tk()</span><br><span class="line">window.title(<span class="string">&quot;计算器-智杰专供&quot;</span>)</span><br><span class="line">window.geometry(<span class="string">&quot;330x300+300+200&quot;</span>)</span><br><span class="line"></span><br><span class="line">StrVar_Entry = tk.StringVar()</span><br><span class="line">entry1 = tk.Entry(window,textvariable=StrVar_Entry)</span><br><span class="line">entry1.grid(row=<span class="number">0</span>,column=<span class="number">0</span>,columnspan=<span class="number">4</span>,sticky=tk.EW)</span><br><span class="line"></span><br><span class="line">list_btn = [<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;*&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;+&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;.&#x27;</span>,<span class="string">&#x27;清空&#x27;</span>,<span class="string">&#x27;退格&#x27;</span>]</span><br><span class="line">row=<span class="number">1</span>;</span><br><span class="line">column=<span class="number">0</span>;</span><br><span class="line">dir_btn = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> ele <span class="keyword">in</span> list_btn:</span><br><span class="line">    dir_btn[ele] = tk.Button(window,text=ele,width=<span class="number">5</span>)</span><br><span class="line">    dir_btn[ele].bind(<span class="string">&quot;&lt;Button-1&gt;&quot;</span>,btn_click) <span class="comment">#事件将会直接传入btn_click. &lt;Button-1&gt;是鼠标左键单击事件</span></span><br><span class="line">    dir_btn[ele].grid(row=row,column=column)</span><br><span class="line">    column+=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> column &gt; <span class="number">3</span>:</span><br><span class="line">        column=<span class="number">0</span></span><br><span class="line">        row+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">btn_equal = tk.Button(window,text=<span class="string">&quot;=&quot;</span>)</span><br><span class="line">btn_equal.bind(<span class="string">&quot;&lt;Button-1&gt;&quot;</span>,btn_click)</span><br><span class="line">btn_equal.grid(row=<span class="number">5</span>, column=<span class="number">0</span>,columnspan=<span class="number">4</span>,sticky=tk.EW)</span><br><span class="line">window.mainloop()</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/09/Python-GUI/" data-id="cl0kicwh10000a8uxav8v59y2" data-title="Python GUI" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Python-基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/08/Python-%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2022-03-09T04:53:10.000Z" itemprop="datePublished">2022-03-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/08/Python-%E5%9F%BA%E7%A1%80/">Python 基础</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h4 id="1-字符串如何不转义？-比如，-n，-就是输出-n-而不是回车"><a href="#1-字符串如何不转义？-比如，-n，-就是输出-n-而不是回车" class="headerlink" title="1. 字符串如何不转义？ 比如， \n， 就是输出\n, 而不是回车"></a>1. 字符串如何不转义？ 比如， \n， 就是输出\n, 而不是回车</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1. \, 把转义符号转义掉</span></span><br><span class="line"> <span class="string">&#x27;I am \\n Ruizhi&#x27;</span> <span class="comment"># print 出来是\n</span></span><br><span class="line"><span class="comment">#2. r,</span></span><br><span class="line"> <span class="string">r&#x27;I am \n Ruizhi&#x27;</span> <span class="comment"># 这里面的\n也不转义</span></span><br><span class="line"><span class="comment">#3. repr(字符串) 函数</span></span><br><span class="line"> <span class="built_in">repr</span>(<span class="string">&#x27;I am \n Ruizhi&#x27;</span>); <span class="comment">#或者， 可以repr(x), x是一个字符串变量，而 r 的后面不能跟字符串</span></span><br><span class="line"><span class="comment">#上面的输出是&#x27;I am \n Ruizhi&#x27;, 在原有字符串的基础上加了&#x27;&#x27;,</span></span><br></pre></td></tr></table></figure>

<h4 id="2-字符串如何分多行写？"><a href="#2-字符串如何分多行写？" class="headerlink" title="2. 字符串如何分多行写？"></a>2. 字符串如何分多行写？</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.在该字符串后面加 \</span></span><br><span class="line">x = <span class="string">&quot;I am &quot;</span> \</span><br><span class="line">     <span class="string">&quot;Ruizhi&quot;</span></span><br><span class="line"><span class="comment"># 2. 使用三个&quot;&quot;&quot;开始与结束</span></span><br><span class="line">x = <span class="string">&quot;&quot;&quot;I</span></span><br><span class="line"><span class="string">     am</span></span><br><span class="line"><span class="string">     Ruizhi&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment">#上面这个会直接输出三行, 以及每行开头的空格。而， 用方法1， 只输出一行</span></span><br></pre></td></tr></table></figure>

<h4 id="3-字符串的分片-（字符串可以看成一个包含多个字符的数值"><a href="#3-字符串的分片-（字符串可以看成一个包含多个字符的数值" class="headerlink" title="3. 字符串的分片 （字符串可以看成一个包含多个字符的数值) \"></a>3. 字符串的分片 （字符串可以看成一个包含多个字符的数值) \</h4><p>序列 [ 开始位置 : 结束位置 : 步长 ]</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s=<span class="string">&quot;Ruizhi Zhang&quot;</span></span><br><span class="line">r=s[<span class="number">0</span>:<span class="number">2</span>] <span class="comment"># =&gt; Ru. 包含开头，不包含结尾</span></span><br><span class="line">r=s[:] <span class="comment"># 获取全部。</span></span><br><span class="line"><span class="comment">#如果开始位置省略，那么默认从0开始。如果结束位置省略，那么默认到最后一位</span></span><br><span class="line"><span class="comment">#同样的操作也可以针对list, 数组之类的。</span></span><br></pre></td></tr></table></figure>

<h4 id="4-字符串的代替"><a href="#4-字符串的代替" class="headerlink" title="4. 字符串的代替"></a>4. 字符串的代替</h4><p>写法类似于取余，%前面是字符串，后面是元组。元组中的值依次代替字符串中的代替项</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">varstr=<span class="string">&quot;您好，%s,这里是%s&quot;</span> %(<span class="string">&quot;Ruizhi&quot;</span>,<span class="string">&quot;我的小心心&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(varstr)</span><br><span class="line">word = <span class="string">&quot;你好，%s, 我很高兴你的到来&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bntChangeClick</span>():</span><br><span class="line">    varLabel.<span class="built_in">set</span>(word %(varEntry.get())) </span><br><span class="line"></span><br><span class="line">varLabel=tk.StringVar()</span><br><span class="line">lbl=tk.Label(window,textvariable=varLabel) <span class="comment">#text 和 textvariable不能同时用，否则不知道该看哪一个</span></span><br></pre></td></tr></table></figure>

<h4 id="5-模板字符串template解决重复性的问题"><a href="#5-模板字符串template解决重复性的问题" class="headerlink" title="5. 模板字符串template解决重复性的问题"></a>5. 模板字符串template解决重复性的问题</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line">template= string.Template(<span class="string">&quot;$a最帅，$a最爱$&#123;b&#125;MM.&quot;</span> <span class="comment">#这里如果不加&#123;&#125;,会有歧义，从而报错</span></span><br><span class="line">                <span class="string">&quot;$a最聪明，$b也是.&quot;</span></span><br><span class="line">                <span class="string">&quot;$a最受人喜欢，&quot;</span></span><br><span class="line">                          <span class="string">&quot;$a也爱$$&quot;</span>) <span class="comment">#这个是Template类进行了实例化. 用$来标记需要替换的位置</span></span><br><span class="line"><span class="comment">#如果想输出$,那就是$$</span></span><br><span class="line">s=template.substitute(a=<span class="string">&quot;张睿智&quot;</span>,b=<span class="string">&quot;智杰&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment">#张睿智最帅，张睿智最爱智杰MM.张睿智最聪明，智杰也是.张睿智最受人喜欢，张睿智也爱$</span></span><br></pre></td></tr></table></figure>

<h4 id="6-字符串format格式化"><a href="#6-字符串format格式化" class="headerlink" title="6. 字符串format格式化"></a>6. 字符串format格式化</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用&#123;&#125;进行替换。</span></span><br><span class="line">s=<span class="string">&quot;张睿智&#123;&#125;.&#123;&#125;爱你&quot;</span></span><br><span class="line">x=s.<span class="built_in">format</span>(<span class="string">&quot;智杰&quot;</span>,<span class="string">&quot;我&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="comment">#使用关键字进行替换</span></span><br><span class="line">s=<span class="string">&quot;&#123;a&#125;is&#123;b&#125;,for&#123;c&#125;, and &#123;a&#125;&quot;</span></span><br><span class="line">x=s.<span class="built_in">format</span>(a=<span class="string">&quot;睿智&quot;</span>,b=<span class="string">&quot;智杰&quot;</span>,c=<span class="string">&quot;我&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="comment">#特殊字符的运用</span></span><br><span class="line"><span class="comment">#!a将字符串转为unicode。!s 可以直接将值转为字符串。(比如int to string). !r 可以表示使用repr函数来输出。</span></span><br><span class="line">s=<span class="string">&quot;站长&#123;here!a&#125;网站&quot;</span></span><br><span class="line"><span class="built_in">print</span>(s.<span class="built_in">format</span>(here=<span class="string">&quot;爱爱&quot;</span>))</span><br><span class="line"><span class="comment">#站长&#x27;\u7231\u7231&#x27;网站</span></span><br><span class="line"><span class="comment">#使用冒号: 的方式</span></span><br><span class="line"><span class="comment"># 1. 进制转换</span></span><br><span class="line">s=<span class="string">&quot;二进制:&#123;n:b&#125; 八进制:&#123;n:o&#125; 十进制:&#123;n:d&#125; 十六进制:&#123;n:x&#125;&quot;</span> :% =&gt;转为百分比。 :e =&gt;转为科学计数。 :f =&gt;转为浮点型</span><br><span class="line"><span class="built_in">print</span>(s.<span class="built_in">format</span>(n=<span class="number">10</span>)) <span class="comment">#或者n=0xa,也可以作为输入</span></span><br><span class="line"><span class="comment"># 二进制:1010 八进制:12 十进制:10 十六进制:a</span></span><br></pre></td></tr></table></figure>

<h4 id="7-字符串替换-replace"><a href="#7-字符串替换-replace" class="headerlink" title="7.字符串替换 replace"></a>7.字符串替换 replace</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s=<span class="string">&quot;Ruizhi is the handsome most guy!!!&quot;</span></span><br><span class="line">x=s.replace(<span class="string">&quot;i&quot;</span>,<span class="string">&quot;I&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure>

<h2 id="list-序列"><a href="#list-序列" class="headerlink" title="list 序列"></a>list 序列</h2><h4 id="1-序列解包"><a href="#1-序列解包" class="headerlink" title="1. 序列解包"></a>1. 序列解包</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"> x,y = <span class="number">33</span>, <span class="number">6</span>; <span class="comment">#x, y 分别得到 33， 6</span></span><br><span class="line"> x, y = y, x; <span class="comment">#x,y 值互换。</span></span><br><span class="line"> a=b=c=<span class="number">3.</span> <span class="comment">#连续赋值， a,b,c都赋值为3.</span></span><br></pre></td></tr></table></figure>

<h4 id="2-list-的加法和乘法"><a href="#2-list-的加法和乘法" class="headerlink" title="2. list 的加法和乘法"></a>2. list 的加法和乘法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">list0 = [<span class="string">&#x27;http&#x27;</span>, <span class="string">&#x27;:&#x27;</span>, <span class="string">&#x27;zhang&#x27;</span>]</span><br><span class="line">list1 = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,list0]</span><br><span class="line">list2 = [<span class="string">&#x27;zhang&#x27;</span>, <span class="string">&#x27;ruizhi&#x27;</span>, list1]</span><br><span class="line"><span class="comment">#上面这种方式就把一个list 加入另一个list了。</span></span><br><span class="line">list2[-<span class="number">1</span>][<span class="number">0</span>] <span class="comment"># 将会输出list1 的第一elem, 为a.</span></span><br><span class="line"><span class="comment">#也可以将两个list 直接相加，产生一个新的list.</span></span><br><span class="line">list0+<span class="string">&quot;abc&quot;</span> <span class="comment"># 这是不对的，list + string,</span></span><br><span class="line">list0+[<span class="string">&quot;abc&quot;</span>] <span class="comment"># 这样才是正确的。</span></span><br><span class="line">x=list0*<span class="number">3</span> <span class="comment"># list0 按顺序重复3次。字符串也可以进行类似操作。</span></span><br></pre></td></tr></table></figure>

<h4 id="3-list-中常用的函数"><a href="#3-list-中常用的函数" class="headerlink" title="3. list 中常用的函数"></a>3. list 中常用的函数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1. count</span></span><br><span class="line">list0.count(<span class="string">&#x27;a&#x27;</span>) <span class="comment"># count list0 中 &#x27;a&#x27;出现的次数。</span></span><br><span class="line"><span class="comment">#2. index,</span></span><br><span class="line"><span class="comment">#找到某个某个元素在list中第一次出现的位置。</span></span><br></pre></td></tr></table></figure>

<h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><h4 id="1-python-中如何调用cmd"><a href="#1-python-中如何调用cmd" class="headerlink" title="1. python 中如何调用cmd?"></a>1. python 中如何调用cmd?</h4><ol>
<li>导入os</li>
<li>调用cmd 命令的函数 os.system(‘cmd’). 必须传入字符串<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"> os.system(<span class="string">&#x27;pwd&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-evec-和-eval"><a href="#2-evec-和-eval" class="headerlink" title="2. evec 和 eval"></a>2. evec 和 eval</h4><p>evec() &amp; eval() 将字符串转变为python 来用, 可以做的典型: gui的计算器。exec()中的字符串代码可以是多行。从而， 我们可以在input 中输入代码，然后用exec运行。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exec</span>(<span class="string">&quot;a=10&quot;</span>) <span class="comment"># a=10</span></span><br><span class="line">x=<span class="built_in">eval</span>(<span class="string">&quot;1+3&quot;</span>)</span><br><span class="line"><span class="comment">#类似于exec,但会返回一个执行结果</span></span><br><span class="line"><span class="comment">#exec 和 eval 都可以再加一个scope. s = &#123;&#125;</span></span><br><span class="line"><span class="comment">#exec(&quot;a=10&quot;, s)</span></span><br></pre></td></tr></table></figure>

<h4 id="3-python中的对象表示方法：-用"><a href="#3-python中的对象表示方法：-用" class="headerlink" title="3. python中的对象表示方法： 用{}"></a>3. python中的对象表示方法： 用{}</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">person = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&quot;Ruizhi&quot;</span>, <span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;Man&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(person[<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line"><span class="built_in">exec</span>(<span class="string">&quot;print(&#x27;姓名:&#x27;+name+&#x27;性别&#x27;+sex)&quot;</span>,person)<span class="comment"># name, sex必须是person中的变量</span></span><br><span class="line"><span class="comment">#输出结果： 姓名:Ruizhi性别Man</span></span><br></pre></td></tr></table></figure>

<h4 id="4-如何与命令行交互？"><a href="#4-如何与命令行交互？" class="headerlink" title="4. 如何与命令行交互？"></a>4. 如何与命令行交互？</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n=<span class="built_in">input</span>(<span class="string">&quot;please type in a random number&quot;</span>);</span><br><span class="line"><span class="comment"># input 中的字符串会显示在屏幕上，而输入将写入n中。</span></span><br><span class="line">n=<span class="built_in">int</span>(n) <span class="comment">#将字符串转为int. 可以自己赋给自己</span></span><br></pre></td></tr></table></figure>

<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><h4 id="1-元组，起到将列表只读的作用"><a href="#1-元组，起到将列表只读的作用" class="headerlink" title="1. 元组，起到将列表只读的作用"></a>1. 元组，起到将列表只读的作用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建：</span></span><br><span class="line"> X=() <span class="comment"># list 是[]</span></span><br><span class="line"><span class="comment">#元组不能修改。但是可以增加元素，或者合并元组 c=a+b.组成一个新的元组。</span></span><br></pre></td></tr></table></figure>

<h2 id="掌握lambda传参"><a href="#掌握lambda传参" class="headerlink" title="掌握lambda传参"></a>掌握lambda传参</h2><p>lambda只是为了简单方便 lambda x:x+1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">scores = <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">filter</span>(<span class="params">scores, func</span>):</span><br><span class="line">     new_scores = []</span><br><span class="line">     <span class="keyword">for</span> s <span class="keyword">in</span> scores:</span><br><span class="line">         <span class="keyword">if</span>(func(s)):</span><br><span class="line">             new_scores.append(s)</span><br><span class="line">     <span class="keyword">return</span> new_scores</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">filter</span>(scores, <span class="keyword">lambda</span> x:x%<span class="number">2</span>==<span class="number">0</span>)) <span class="comment">#lambda这里相当于把一个函数传进去了，从而不需要再写一个函数</span></span><br><span class="line">btn = tk.Button(window, text=ele, command=<span class="keyword">lambda</span>: btn_click(ele), width=<span class="number">5</span>)</span><br><span class="line">f = <span class="keyword">lambda</span> x:x*x; <span class="comment">#输入是x, 输出是x*x.</span></span><br><span class="line">g = <span class="keyword">lambda</span> x,y: x+y</span><br><span class="line"><span class="built_in">print</span>(g(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">q</span>(<span class="params">a,b,c</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x: a*x*x+b*x+c</span><br><span class="line">f = q(<span class="number">2</span>,-<span class="number">1</span>,<span class="number">1</span>) <span class="comment">#f现在仍然是一个函数，他是2*x*x-x+1</span></span><br><span class="line"><span class="built_in">print</span>(f(<span class="number">5</span>))<span class="comment"># x=5. 或者， 也可以写为 print(q(2,-1,1)(5))</span></span><br></pre></td></tr></table></figure>

<h2 id="不定长参数"><a href="#不定长参数" class="headerlink" title="不定长参数"></a>不定长参数</h2><h4 id="1-形参"><a href="#1-形参" class="headerlink" title="1. *形参"></a>1. *形参</h4><p>在定义函数时，可以在形参前边加上一个*, 这样形参将会获得所有的实参,并将其保存的元组中。传几个参数都行， 可以是0到多个。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fn</span>(<span class="params">a,*b</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;a=&quot;</span>,a,<span class="string">&quot;  b=&quot;</span>, b) <span class="comment">#a= 1   b= (2, 3, 4, 5)</span></span><br><span class="line">fn(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<h4 id="2-形参"><a href="#2-形参" class="headerlink" title="2. **形参"></a>2. **形参</h4><p>**形参可以接收其他的关键字参数，它会将这些参数统一保存到一个字典中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fn</span>(<span class="params">b,**a</span>):</span><br><span class="line">    <span class="built_in">print</span>(b,a, <span class="built_in">type</span>(a)) <span class="comment">#b=1 a=&#123;&#x27;d&#x27;: 2, &#x27;c&#x27;: 3&#125; &lt;class &#x27;dict&#x27;&gt;</span></span><br><span class="line">fn(b=<span class="number">1</span>,d=<span class="number">2</span>,c=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<h4 id="3-参数的解包"><a href="#3-参数的解包" class="headerlink" title="3. 参数的解包"></a>3. 参数的解包</h4><p>传递实参时，也可以在序列类型的参数前添加*，这样他会自动将序列中的元素依次作为参数传递。 不过序列中元素的个数应该与形参的个数相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fn4</span>(<span class="params">a,b,c</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;a=&#x27;</span>,a)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;b=&#x27;</span>,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;c=&#x27;</span>,c)</span><br><span class="line"><span class="comment"># a= 10# b= 20# c= 30</span></span><br><span class="line">t=(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>)</span><br><span class="line">fn4(*t)</span><br></pre></td></tr></table></figure>

<p>**可以对字典进行解包.不过需要注意的是，key必须与参数形参一致。比如说，如果key中有’d’,这时就会报错。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fn4</span>(<span class="params">a,b,c</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;a=&#x27;</span>,a)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;b=&#x27;</span>,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;c=&#x27;</span>,c)</span><br><span class="line"><span class="comment"># a= 10# b= 20# c= 30</span></span><br><span class="line">d = &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">10</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">20</span>,<span class="string">&#x27;c&#x27;</span>:<span class="number">30</span>&#125;</span><br><span class="line">fn4(**d)</span><br></pre></td></tr></table></figure>

<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><p>高阶函数是接收函数作为参数，或者将函数作为返回值的函数。</p>
<h4 id="1-接收函数作为参数"><a href="#1-接收函数作为参数" class="headerlink" title="1. 接收函数作为参数"></a>1. 接收函数作为参数</h4><p>下面的fun2同时也可以被lambda替代。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fun2</span>(<span class="params">a</span>):</span><br><span class="line">    <span class="keyword">if</span> a%<span class="number">2</span>==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fc</span>(<span class="params">func, list1</span>):</span><br><span class="line">    new_list = []</span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> list1:</span><br><span class="line">        <span class="keyword">if</span> func(n):</span><br><span class="line">            new_list.append(n)</span><br><span class="line">    <span class="keyword">return</span> new_list</span><br><span class="line"><span class="built_in">print</span>(fc(fun2, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])) <span class="comment">#[2, 4]</span></span><br><span class="line"><span class="built_in">print</span>(fc(<span class="keyword">lambda</span> x: x%<span class="number">2</span>==<span class="number">0</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])) <span class="comment">#[2, 4] </span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/08/Python-%E5%9F%BA%E7%A1%80/" data-id="cl0j46a3r0001l4ux0c5g6k24" data-title="Python 基础" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-PYTHON-爬虫" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/06/PYTHON-%E7%88%AC%E8%99%AB/" class="article-date">
  <time class="dt-published" datetime="2022-03-07T02:38:03.000Z" itemprop="datePublished">2022-03-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/06/PYTHON-%E7%88%AC%E8%99%AB/">PYTHON 爬虫</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-urllib的基本用法"><a href="#1-urllib的基本用法" class="headerlink" title="1. urllib的基本用法"></a>1. urllib的基本用法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    url = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line">    <span class="comment"># 模拟浏览器，向服务器发送请求。 response 是http.client.HTTPResponse类型</span></span><br><span class="line">    response = urllib.request.urlopen(url)</span><br><span class="line">    <span class="comment"># read是返回字节形式的二级制(b&#x27; 开头)，所以直接print的话，不是我们在网页上看到的东西.这里应该decode 成</span></span><br><span class="line">    <span class="comment"># charset = 的类型，即为 utf-8.</span></span><br><span class="line">    content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="comment">#response.readline(), readlines 和file中的readline, readlines, 类似</span></span><br><span class="line">    <span class="comment">#response.getcode(), 返回状态码，如果是200， 那么证明逻辑没错。其他有可能是404之类。</span></span><br><span class="line">    <span class="comment">#response.geturl(), 返回url地址</span></span><br><span class="line">    <span class="comment">#response.getheaders(), 返回一个状态信息</span></span><br><span class="line">    <span class="comment"># 二进制 =》 字符串 解码 decode (编码的格式）</span></span><br><span class="line"><span class="comment">#    print(content)</span></span><br><span class="line">    <span class="comment">#下载网页, 第一个参数是网址，第二是下载后保存成的文件名</span></span><br><span class="line">    urllib.request.urlretrieve(url, <span class="string">&#x27;baidu.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h2 id="2-添加-headers-及quote-转变汉字为unicode"><a href="#2-添加-headers-及quote-转变汉字为unicode" class="headerlink" title="2. 添加 headers, 及quote 转变汉字为unicode"></a>2. 添加 headers, 及quote 转变汉字为unicode</h2><p>添加headers相当于将自己伪装成浏览器。 因为我们想搜索“周杰伦”相关内容，而周杰伦是汉字，所以我们需要将其用quote 将其转为unicode, 然后添加到url.<br>如果有多个参数呢？ 再用 quote将会比较费劲。此时我们可以用urlencode</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    url = <span class="string">&#x27;https://www.baidu.com/s?wd=&#x27;</span></span><br><span class="line"><span class="comment">#    https://www.baidu.com/s?wd=周杰伦</span></span><br><span class="line"><span class="comment">#http/https    www.baidu.com   80/443     s   wd=周杰伦    #</span></span><br><span class="line"><span class="comment">#   协议             主机        端口号     路径    参数     锚点</span></span><br><span class="line"><span class="comment">#    将自己伪装</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">#    下文中的周杰伦并不能被直接识别， 所以这里应该想将其转变为unicode, 然后再加到url中， 我们需要用到urllib.parse</span></span><br><span class="line">    name = urllib.parse.quote(<span class="string">&#x27;周杰伦&#x27;</span>)</span><br><span class="line">    url = url + name</span><br><span class="line"> <span class="comment">#   因为urlopen方法中不能存储字典，所以headers 不能传递进去</span></span><br><span class="line"> <span class="comment">#   同时，这里需要加上变量的名字，因为这个Request有多个参数，这里如果不加名字，则headers 被赋予了前面的变量。</span></span><br><span class="line">    request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">    response = urllib.request.urlopen(request)</span><br><span class="line"></span><br><span class="line">    content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(content)</span><br><span class="line"><span class="comment">#    如果有多个参数呢？ 再用 quote将会比较费劲。此时我们可以用urlencode. 应用于多个参数的时候。</span></span><br><span class="line"><span class="comment">#    https://www.baidu.com/s?wd=周杰伦&amp;sex=男</span></span><br><span class="line"><span class="comment">#    urlencode要求其应该按照字典形式。其将会各个elem之间用&amp;连接</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;wd&#x27;</span>:<span class="string">&#x27;周杰伦&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;男&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    data = urllib.parse.urlencode(data)</span><br><span class="line"><span class="comment">#    output of the above code: wd=%E5%91%A8%E6%9D%B0%E4%BC%A6&amp;sex=%E7%94%B7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#============================================================#</span></span><br><span class="line"><span class="comment">#实例</span></span><br><span class="line">    base_url = <span class="string">&#x27;https://www.baidu.com/s?&#x27;</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;wd&#x27;</span>:<span class="string">&#x27;周杰伦&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;location&#x27;</span>:<span class="string">&#x27;中国台湾省&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#请求资源路径</span></span><br><span class="line">    new_data = urllib.parse.urlencode(data)</span><br><span class="line">    url = base_url+new_data</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#请求对象的定制</span></span><br><span class="line">    request = urllib.request.Request(url=url, headers = headers);</span><br><span class="line">    <span class="comment">#模拟浏览器想服务器发送请求</span></span><br><span class="line">    response = urllib.request.urlopen(request)</span><br><span class="line">    <span class="comment">#获取网页源码的数据</span></span><br><span class="line">    content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>
<h2 id="3-post-请求百度翻译"><a href="#3-post-请求百度翻译" class="headerlink" title="3. post 请求百度翻译"></a>3. post 请求百度翻译</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    url=<span class="string">&quot;https://fanyi.baidu.com/sug&quot;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;kw&#x27;</span>:<span class="string">&#x27;spider&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#post 请求的参数 必须要进行编码</span></span><br><span class="line">    data = urllib.parse.urlencode(data).encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="comment">#post的请求参数 是不会拼接在url的后面的， 而是需要放在请求对象定制的参数中</span></span><br><span class="line">    request = urllib.request.Request(url=url,data=data, headers=headers)</span><br><span class="line">    <span class="comment">#模拟浏览器向服务器发送请求</span></span><br><span class="line">    response = urllib.request.urlopen(request)</span><br><span class="line">    content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)<span class="comment">#post进行了两次编码. response.read() 的结果是b&#x27;&#123;...&#125;&#x27;。所以应该decode,</span></span><br><span class="line">    <span class="comment">#字符串==&gt;json对象</span></span><br><span class="line">    obj = json.loads(content)</span><br><span class="line">    <span class="built_in">print</span>(obj)</span><br></pre></td></tr></table></figure>
<h2 id="4-豆瓣网页的访问以及写到本地"><a href="#4-豆瓣网页的访问以及写到本地" class="headerlink" title="4. 豆瓣网页的访问以及写到本地"></a>4. 豆瓣网页的访问以及写到本地</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write_into_f</span>(<span class="params">page_num,fp</span>):</span><br><span class="line">    url = <span class="string">&quot;https://movie.douban.com/j/chart/top_list?type=5&amp;interval_id=100%3A90&amp;action=&amp;start=&quot;</span>+<span class="built_in">str</span>(page_num*<span class="number">20</span>) +<span class="string">&quot;&amp;limit=20&quot;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    request = urllib.request.Request(url = url, headers = headers)</span><br><span class="line">    response = urllib.request.urlopen(request)</span><br><span class="line">    content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="comment"># #写到本地。 open方法默认情况下是使用gdk的编码，如果要存储中文，那么需要在open中加encoding = &#x27;utf-8&#x27;</span></span><br><span class="line">    fp.write(content)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;start page&quot;</span>))</span><br><span class="line">    end_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;end paga&quot;</span>))</span><br><span class="line">    fp = <span class="built_in">open</span>(<span class="string">&#x27;douban.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)  <span class="comment"># 因为里面有中文，所以需要加utf-8</span></span><br><span class="line">    <span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page+<span class="number">1</span>):</span><br><span class="line">        write_into_f(page-<span class="number">1</span>,fp)</span><br></pre></td></tr></table></figure>
<h2 id="5-handler的使用"><a href="#5-handler的使用" class="headerlink" title="5. handler的使用"></a>5. handler的使用</h2><p>使用handler 来访问百度，获取网页源码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url = url, headers = headers)</span><br><span class="line"><span class="comment">#下面三个相当于urlopen</span></span><br><span class="line"><span class="comment">#handler build_opener open</span></span><br><span class="line"><span class="comment">#(1)获取handler 对象</span></span><br><span class="line">handler = urllib.request.HTTPHandler()</span><br><span class="line"><span class="comment">#(2)获取opener 对象</span></span><br><span class="line">opener = urllib.request.build_opener(handler)</span><br><span class="line"><span class="comment">#(3)调用open 方法</span></span><br><span class="line">response = opener.<span class="built_in">open</span>(request)</span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>

<h2 id="6-xpath-解析"><a href="#6-xpath-解析" class="headerlink" title="6. xpath 解析"></a>6. xpath 解析</h2><p>解析服务器响应的数据 response.read().decode(‘utf-8’) *********** 使用etree.HTML()<br>(1) 获取网页的源码<br>(2) 解析 服务器相应的文件<br>(3) 打印</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">url = <span class="string">&#x27;https://www.baidu.com/&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url = url, headers = headers)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line"><span class="comment">#(1) 获取网页源码</span></span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="comment">#（2） 解析服务器响应的文件</span></span><br><span class="line">tree = etree.HTML(content)</span><br><span class="line"><span class="comment">#(3) 获取想要的数据</span></span><br><span class="line">result = tree.xpath(<span class="string">&#x27;//input[@id=&quot;su&quot;]/@value&#x27;</span>) <span class="comment">#获取tree中，标签为input, id==&#x27;su&#x27;,的value的值</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<h2 id="7-xpath-的基本语法"><a href="#7-xpath-的基本语法" class="headerlink" title="7.xpath 的基本语法"></a>7.xpath 的基本语法</h2><ol>
<li>路径查询:<br><code>//</code>: 查找所有子孙节点，不考虑层级关系<br><code>/</code>: 找直接子节点</li>
<li>谓词查询<br><code>//div[@id]</code><br><code>//div[@id=&quot;maincontent&quot;]</code>: 查找div中，id为”maincontent”的项</li>
<li>属性查询<br><code>//@class</code></li>
<li>模糊词查询<br><code>//div[contains(@id,&quot;he&quot;)]</code><br><code>//div[starts-with(@id, &quot;he&quot;)]</code></li>
<li>内容查询<br><code>//div/h1/text()</code></li>
<li>逻辑查询<br><code>//div[@id=&quot;head&quot; and @class=&quot;s_down&quot;]</code></li>
<li>实例<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;l1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;l2&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#text() 获取标签中的内容</span></span><br><span class="line">li_list = tree.xpath(<span class="string">&#x27;//ul/li[@id]/text()&#x27;</span>) <span class="comment">#获取 ul 下， 所有有id属性的li标签的内容</span></span><br><span class="line"><span class="comment">#找到id 为l1 的li 标签 (在一个网页中id 都是独一无二的</span></span><br><span class="line">li_list = tree.xpath(<span class="string">&#x27;//ul/li[@id=&quot;li&quot;]/text()&#x27;</span>)</span><br><span class="line"><span class="comment">#查找到id 为l1 的li 标签的class得属性值</span></span><br><span class="line">li = tree.xpath(<span class="string">&#x27;//ul/li[@id=&quot;li&quot;]/@class&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_request</span>(<span class="params">page_num</span>):</span><br><span class="line">  <span class="keyword">if</span>(page_num == <span class="number">1</span>):</span><br><span class="line">    url = <span class="string">&#x27;https://sc.chinaz.com/tupian/nvshengtupian.html&#x27;</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    url = <span class="string">&#x27;https://sc.chinaz.com/tupian/nvshengtupian_&#x27;</span>+<span class="built_in">str</span>(page_num)+<span class="string">&#x27;.html&#x27;</span></span><br><span class="line">  headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> urllib.request.Request(url = url, headers = headers)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_content</span>(<span class="params">request</span>):</span><br><span class="line">  response = urllib.request.urlopen(request)</span><br><span class="line">  content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> content</span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">down_load</span>(<span class="params">content</span>):</span><br><span class="line">  tree = etree.HTML(content)</span><br><span class="line">  name_list=tree.xpath(<span class="string">&#x27;//div[@id=&quot;container&quot;]//a/img/@alt&#x27;</span>)</span><br><span class="line"> <span class="comment">#一般设计图片的网站都会进行懒加载，就是只有当我们读到他的时候才会加载。这个我们应该使用的是图片加载出来的标签。</span></span><br><span class="line">  src_list = tree.xpath(<span class="string">&#x27;//div[@id=&quot;container&quot;]//a/img/@src2&#x27;</span>)</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(src_list)):</span><br><span class="line">    url = <span class="string">&#x27;https:&#x27;</span> + src_list[i]</span><br><span class="line">    urllib.request.urlretrieve(url=url, filename=<span class="string">&#x27;./love_img/&#x27;</span>+ name_list[i]+<span class="string">&#x27;.jpg&#x27;</span>)<span class="comment">#把图片放在love_img的dir中</span></span><br><span class="line">    <span class="built_in">print</span>(name_list[i])</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  start_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;start page: &#x27;</span>))</span><br><span class="line">  end_page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;end page: &#x27;</span>))</span><br><span class="line">  <span class="keyword">for</span> page_num <span class="keyword">in</span> <span class="built_in">range</span>(start_page, end_page+<span class="number">1</span>):</span><br><span class="line">    request = create_request(page_num)</span><br><span class="line">    content = get_content(request)</span><br><span class="line">    down_load(content)</span><br></pre></td></tr></table></figure>

<h2 id="8-jsonpath-解析淘票票"><a href="#8-jsonpath-解析淘票票" class="headerlink" title="8. jsonpath 解析淘票票"></a>8. jsonpath 解析淘票票</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> json,jsonpath</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">url = <span class="string">&quot;https://dianying.taobao.com/cityAction.json?activityId&amp;_ksTS=1647660213489_343&amp;jsoncallback=jsonp344&amp;action=cityAction&amp;n_s=new&amp;event_submit_doGetAllRegion=true&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="comment">#:authority: dianying.taobao.com # 带:的headers基本上都没用</span></span><br><span class="line"><span class="comment">#:method: GET</span></span><br><span class="line"><span class="comment">#:path: /cityAction.json?activityId&amp;_ksTS=1647660213489_343&amp;jsoncallback=jsonp344&amp;action=cityAction&amp;n_s=new&amp;event_submit_doGetAllRegion=true</span></span><br><span class="line">    <span class="string">&quot;accept&quot;</span>: <span class="string">&#x27;text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01&#x27;</span>,</span><br><span class="line">    <span class="comment">#&quot;accept-encoding&quot;: &#x27;gzip, deflate, br&#x27;, #这里也要注释掉，这些都不是支持的encoding方式</span></span><br><span class="line">    <span class="string">&quot;accept-language&quot;</span>: <span class="string">&#x27;en-US,en;q=0.9&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;cookie&quot;</span>: <span class="string">&#x27;thw=us; _ga=GA1.2.492323983.1633318212; cna=NKXOGbLkYEwCAa4+SDA0Vb+u; _ga_YFVFB9JLVB=GS1.1.1633318212.1.1.1633318689.0; t=2739afbcec01796ef9373d8eb281c5f7; cookie2=11e597d3d08eab2f9c098d133c08a99e; v=0; _tb_token_=5d3373e8e79e8; xlly_s=1; tb_city=110100; tb_cityName=&quot;sbG+qQ==&quot;; tfstk=c44GBVbiolo18Rn3VNg_TtoqZhBda1IZCrzU8zCiWdErsMqi_sx2Y3ygp6DOFO-f.; l=eBLr5GOIgulq4fqfBO5aFurza77OzIRb4sPzaNbMiInca69FTF_d9NCnPPg97dtjQt1DwetzQ4is6RLHR3AgCc0c07kqm0ltnxf..; isg=BKioBAI9Xn7SkHGVZ42LYHnBeZa60QzbyVrmuGLZJCMWvUgnCuENa3rztU1NjcSz&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;referer&quot;</span>: <span class="string">&#x27;https://dianying.taobao.com/?spm=a1z21.3046609.city.1.3a37112arYFt3D&amp;city=110100&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua&quot;</span>: <span class="string">&#x27;&quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Chromium&quot;;v=&quot;98&quot;, &quot;Google Chrome&quot;;v=&quot;98&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua-mobile&quot;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua-platform&quot;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-dest&quot;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-mode&quot;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-site&quot;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;user-agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;x-requested-with&quot;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url = url, headers = headers)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">obj = json.load(<span class="built_in">open</span>(<span class="string">&quot;douban.json&quot;</span>,<span class="string">&#x27;r&#x27;</span>,encoding = <span class="string">&#x27;utf-8&#x27;</span>)) <span class="comment">#上面的content已经被我手动写入douban.json</span></span><br><span class="line">city_list = jsonpath.jsonpath(obj,<span class="string">&#x27;$..regionName&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(city_list)</span><br></pre></td></tr></table></figure>

<h2 id="9-BeautifulSoup-简称bs4"><a href="#9-BeautifulSoup-简称bs4" class="headerlink" title="9. BeautifulSoup 简称bs4"></a>9. BeautifulSoup 简称bs4</h2><p>什么是bs4? 他和lxml一样，都是有个html解析器，主要功能也是解析和提取数据<br>缺点： 没有lxml效率高。<br>优点：接口设计人性化，使用方便</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment">#文件的默认打开编码格式是gbk， 所以在打开文件的时候需要指定编码</span></span><br><span class="line">soup = BeautifulSoup(<span class="built_in">open</span>(<span class="string">&#x27;baidu.html&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>),<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.a) <span class="comment">#找到第一个符合条件的数据: &lt;a class=&quot;toindex&quot; href=&quot;/&quot;&gt;百度首页&lt;/a&gt;</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs) <span class="comment"># 获取标签的属性和属性值 &#123;&#x27;class&#x27;: [&#x27;toindex&#x27;], &#x27;href&#x27;: &#x27;/&#x27;&#125;</span></span><br><span class="line">bs4的一些函数</span><br><span class="line"><span class="comment">#(1) find</span></span><br><span class="line"><span class="built_in">print</span>(soup.find(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">#返回第一个符合条件的数据，和soup.a相同</span></span><br><span class="line"><span class="built_in">print</span>(soup.find(<span class="string">&#x27;a&#x27;</span>,href=<span class="string">&quot;javascript:;&quot;</span>)) <span class="comment">#&lt;a class=&quot;pf&quot; href=&quot;javascript:;&quot; name=&quot;tj_settingicon&quot;&gt;设置&lt;i class=&quot;c-icon c-icon-triangle-down&quot;&gt;&lt;/i&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="comment">#(2) find_all</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&#x27;a&#x27;</span>))<span class="comment"># 返回所有符合条件的数据</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&#x27;li&#x27;</span>, limit=<span class="number">2</span>)) <span class="comment">#limit的作用是查找前几个数据</span></span><br><span class="line"><span class="comment">#(3) select（推荐）</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;a&#x27;</span>))<span class="comment">#返回一个列表，并且包含所有a</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;.toindex&#x27;</span>)) <span class="comment"># 通过加一个&#x27;.&#x27;代表class. 这里找的是toindex class.</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;#l1&#x27;</span>)) <span class="comment">#查找 id 为l1 的数据</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;li[id=&quot;l2&quot;]&#x27;</span>)) <span class="comment">#查找到li标签中id为l2的标签</span></span><br><span class="line"><span class="comment">#层级选择器</span></span><br><span class="line"><span class="comment"># 后代选择器</span></span><br><span class="line"><span class="comment">#找到div下面的li</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;div li&#x27;</span>))</span><br><span class="line"><span class="comment">#子代选择器</span></span><br><span class="line"><span class="comment">#某标签的第一级子标签. ul是div的子标签，li是ul的子标签</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;div&gt;ul&gt;li&#x27;</span>))</span><br><span class="line"><span class="comment">#获取内容</span></span><br><span class="line">obj=soup.select(<span class="string">&#x27;#d1&#x27;</span>)[<span class="number">0</span>] <span class="comment">#select返回的是一个列表</span></span><br><span class="line"><span class="built_in">print</span>(obj.get_text()) <span class="comment">#返回标签对象中的内容。</span></span><br></pre></td></tr></table></figure>
<p>bs4 爬取星巴克</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">url = <span class="string">&quot;https://www.starbucks.com.cn/menu/&quot;</span></span><br><span class="line">response = urllib.request.urlopen(url)</span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">soup = BeautifulSoup(content,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">name_list = soup.select(<span class="string">&#x27;ul[class=&quot;grid padded-3 product&quot;] strong&#x27;</span>)<span class="comment">#对应的xpath为： //ul[@class=&quot;grid padded-3 product&quot;]//strong</span></span><br><span class="line"><span class="keyword">for</span> ele <span class="keyword">in</span> name_list:</span><br><span class="line">    <span class="built_in">print</span>(ele.get_text())</span><br></pre></td></tr></table></figure>

<h2 id="10-selenium"><a href="#10-selenium" class="headerlink" title="10.selenium"></a>10.selenium</h2><p>什么是selenium：</p>
<ol>
<li>selenium 是一个用于Web应用程序测试的工具.</li>
<li>Selenium 测试直接运行在浏览器中，就像真正的用户在操作一样。</li>
<li>优点：比前面更真，不易被反爬。 缺点：比较慢</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">path = <span class="string">&#x27;chromedriver.exe&#x27;</span><span class="comment">#这个文件是在网上下载，放在同文件夹中</span></span><br><span class="line">brower = webdriver.Chrome(path) <span class="comment">#创建浏览器</span></span><br><span class="line"><span class="comment">#访问网站</span></span><br><span class="line">url = <span class="string">&quot;https://www.jd.com&quot;</span></span><br><span class="line">brower.get(url) <span class="comment">#打开网页，这个命令会直接打开一个浏览器</span></span><br><span class="line">content = brower.page_source</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>

<p>selenium 元素定位<br>元素定位要做的就是模拟鼠标和键盘来操作这些元素，点击，输入等等。操作这些元素前首先要找到它们，WebDriver提供了很多定位元素的方法.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">path = <span class="string">&quot;chromedriver.exe&quot;</span></span><br><span class="line">brower = webdriver.Chrome(path)</span><br><span class="line">url = <span class="string">&quot;https://www.baidu.com&quot;</span></span><br><span class="line">brower.get(url)</span><br><span class="line"></span><br><span class="line"><span class="comment">#元素定位</span></span><br><span class="line"><span class="comment">#button = brower.find_element_by_id(&#x27;su&#x27;)#根据id 来找到</span></span><br><span class="line"><span class="comment"># button = brower.find_element_by_name(&quot;wd&quot;)</span></span><br><span class="line"><span class="comment"># button = brower.find_elements_by_xpath(&#x27;//input[@id=&quot;su&quot;]&#x27; ) #根据xpath 语句来获取对象</span></span><br><span class="line"><span class="comment">#button = brower.find_element_by_tag_name(&#x27;input&#x27;)</span></span><br><span class="line">button = brower.find_element_by_link_text(<span class="string">&quot;新闻&quot;</span>)<span class="comment">#button是&#x27;新闻&#x27;对应的超链接</span></span><br><span class="line"><span class="built_in">print</span>(button)</span><br></pre></td></tr></table></figure>

<p>selenium元素信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">path = <span class="string">&quot;chromedriver.exe&quot;</span></span><br><span class="line">brower = webdriver.Chrome(path)</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">brower.get(url)</span><br><span class="line"></span><br><span class="line"><span class="built_in">input</span> = brower.find_element_by_id(<span class="string">&#x27;su&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">input</span>.get_attribute(<span class="string">&#x27;class&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p>selenium交互</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#这一块代码老是触发百度安全验证</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">path = <span class="string">&#x27;chromedriver.exe&#x27;</span></span><br><span class="line">brower = webdriver.Chrome(path)</span><br><span class="line">url = <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">brower.get(url)</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">time.sleep(<span class="number">2</span>) <span class="comment">#睡上2sec</span></span><br><span class="line"><span class="comment">#获取文本框的对象</span></span><br><span class="line"><span class="built_in">input</span> = brower.find_element_by_id(<span class="string">&#x27;kw&#x27;</span>)</span><br><span class="line"><span class="comment">#在文本框中输入’周杰伦&#x27;</span></span><br><span class="line"><span class="built_in">input</span>.send_keys(<span class="string">&#x27;周杰伦&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment">#获取 &#x27;百度一下&#x27;按钮</span></span><br><span class="line">button = brower.find_element_by_id(<span class="string">&#x27;su&#x27;</span>)</span><br><span class="line">button.click() <span class="comment">#点击按钮</span></span><br><span class="line">time.sleep(<span class="number">3</span>)<span class="comment">#睡得时间太少会触发安全验证。</span></span><br><span class="line"><span class="comment">#滑到底部</span></span><br><span class="line">js_bottom = <span class="string">&#x27;document.documentElement.scrollTop=10000&#x27;</span><span class="comment">#滑到底部的固定代码</span></span><br><span class="line">brower.execute_script(js_bottom)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">next</span> = brower.find_element_by_xpath(<span class="string">&#x27;//a[@class=&quot;n&quot;]&#x27;</span>)<span class="comment">#获取下一页的按钮</span></span><br><span class="line"><span class="built_in">next</span>.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">brower.back()<span class="comment">#回到上一页</span></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">brower.forward()<span class="comment">#回去</span></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment">#退出</span></span><br><span class="line">brower.quit()</span><br></pre></td></tr></table></figure>

<h2 id="11-requests库-的基本使用"><a href="#11-requests库-的基本使用" class="headerlink" title="11. requests库 的基本使用"></a>11. requests库 的基本使用</h2><h4 id="1-一个类型和六个属性"><a href="#1-一个类型和六个属性" class="headerlink" title="1. 一个类型和六个属性"></a>1. 一个类型和六个属性</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line">response = requests.get(url=url)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置响应的编码格式</span></span><br><span class="line">response.encoding=<span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line"><span class="comment">#以字符串形式返回了网页源码</span></span><br><span class="line"><span class="built_in">print</span>(response.text)</span><br><span class="line"><span class="comment">#返回url地址</span></span><br><span class="line"><span class="built_in">print</span>(response.url)</span><br><span class="line"><span class="comment">#返回响应的状态码</span></span><br><span class="line"><span class="built_in">print</span>(response.status_code)</span><br><span class="line"><span class="comment">#返回的是响应头</span></span><br><span class="line"><span class="built_in">print</span>(response.headers)</span><br></pre></td></tr></table></figure>

<h4 id="2-requests的get请求"><a href="#2-requests的get请求" class="headerlink" title="2. requests的get请求"></a>2. requests的get请求</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url = <span class="string">&quot;https://www.baidu.com/s?&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data= &#123;</span><br><span class="line">    <span class="string">&#x27;wd&#x27;</span>:<span class="string">&#x27;北京&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#get的三个参数: 1. url, 2. params, 3. kwargs</span></span><br><span class="line"><span class="comment">#和urllib中的get的区别，参数无需urlencode. 不需要请求对象定制</span></span><br><span class="line">response = requests.get(url=url,params=data,headers=headers)</span><br><span class="line">content = response.text</span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>

<h4 id="3-requests-的post-请求"><a href="#3-requests-的post-请求" class="headerlink" title="3. requests 的post 请求"></a>3. requests 的post 请求</h4><p>用post 还是get在网页的headers中有。如下就是get请求 <br><code>Request Method: GET</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url = <span class="string">&#x27;https://fanyi.baidu.com/sug&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;kw&#x27;</span>:<span class="string">&#x27;eye&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(url=url, data=data,headers=headers)</span><br><span class="line">content =response.text</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">obj=json.loads(content,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment">#总结：</span></span><br><span class="line"><span class="comment">#1）post 请求不需要编解码</span></span><br><span class="line"><span class="comment">#2)不需要请求对象定制</span></span><br></pre></td></tr></table></figure>

<h4 id="4-爬虫-requests-cookie登录"><a href="#4-爬虫-requests-cookie登录" class="headerlink" title="4. 爬虫 requests cookie登录"></a>4. 爬虫 requests cookie登录</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># __VIEWSTATE: Po55dnuLnAZrl65to1WEb/iFsZBUmlzppkzoLx3/oYC84rpP5yDPK5P/CxRsGPxF8yF5R3t2e5FM63fFnuwH0KtrK9zLrA0gtuqh6DmDCLBJfS+pbZ3AGd3iw0w=</span></span><br><span class="line"><span class="comment"># __VIEWSTATEGENERATOR: C93BE1AE</span></span><br><span class="line"><span class="comment"># from: http://so.gushiwen.cn/user/collect.aspx</span></span><br><span class="line"><span class="comment"># email: ruizhizhang08@gmail.com</span></span><br><span class="line"><span class="comment"># pwd: delwiqwqe</span></span><br><span class="line"><span class="comment"># code: qbk8</span></span><br><span class="line"><span class="comment"># denglu: 登录</span></span><br><span class="line"><span class="comment">#以上，__VIEWSTATE &amp; __VIEWSTATEGENERATOR &amp; code 都是变量，这是难点</span></span><br><span class="line"><span class="comment">#__VIEWSTATE &amp; __VIEWSTATEGENERATO, 我们观察到这两个数据在页面中，所以我们需要获取页面的源码，然后进行解析就能获取</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://so.gushiwen.cn/user/login.aspx?from=http://so.gushiwen.cn/user/collect.aspx&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(url = url, headers=headers)</span><br><span class="line">content = response.text</span><br><span class="line"><span class="comment">#解析页面源码，然后提取__VIEWSTATE &amp; __VIEWSTATEGENERATOR</span></span><br><span class="line">soup = BeautifulSoup(content,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">viewstate = soup.select(<span class="string">&#x27;#__VIEWSTATE&#x27;</span>)[<span class="number">0</span>].attrs.get(<span class="string">&#x27;value&#x27;</span>)</span><br><span class="line">viewstategenerator = soup.select(<span class="string">&#x27;#__VIEWSTATEGENERATOR&#x27;</span>)[<span class="number">0</span>].attrs.get(<span class="string">&#x27;value&#x27;</span>)</span><br><span class="line"><span class="comment">#获取验证码图片</span></span><br><span class="line">code = soup.select(<span class="string">&#x27;#imgCode&#x27;</span>)[<span class="number">0</span>].attrs.get(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">code_url = <span class="string">&quot;https://so.gushiwen.cn&quot;</span> + code</span><br><span class="line"><span class="comment">#获取了验证码图片之后，下载到本地，然后观察验证码，观察之后，然后再控制台输入这个验证码，就可以将这个值给code参数，然后登陆</span></span><br><span class="line">session = requests.session()</span><br><span class="line"><span class="comment">#验证码的url内容</span></span><br><span class="line">response_code = session.get(code_url)</span><br><span class="line"><span class="comment">#注意此时要使用二进制数据，因为我们要使用的是图片的下载。</span></span><br><span class="line">content_code = response_code.content</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;code.jpg&#x27;</span>,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fp: <span class="comment">#wb， 将二进制写入文件。</span></span><br><span class="line">    fp.write(content_code)</span><br><span class="line">code_name = <span class="built_in">input</span>(<span class="string">&#x27;请输入你的验证码&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url_post = <span class="string">&quot;https://so.gushiwen.cn/user/login.aspx?from=http%3a%2f%2fso.gushiwen.cn%2fuser%2fcollect.aspx&quot;</span> <span class="comment">#这个跟上一个的区别是一个是post, 一个是get.</span></span><br><span class="line">data_post = &#123;</span><br><span class="line">    <span class="string">&#x27;__VIEWSTATE&#x27;</span>: viewstate,</span><br><span class="line">    <span class="string">&#x27;__VIEWSTATEGENERATOR&#x27;</span>: viewstategenerator,</span><br><span class="line">    <span class="string">&#x27;from&#x27;</span>: <span class="string">&#x27;http://so.gushiwen.cn/user/collect.aspx&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;zhangruizhi08@gmail.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pwd&#x27;</span>: <span class="string">&quot;mmkjngghhkz&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;code&#x27;</span>: code_name,</span><br><span class="line">    <span class="string">&#x27;denglu&#x27;</span>: <span class="string">&#x27;登录&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response_post = session.post(url=url_post,headers=headers,data=data_post)</span><br><span class="line">content_post = response_post.text</span><br><span class="line"><span class="built_in">print</span>(content_post)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;gushiwen.html&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:    </span><br><span class="line">    fp.write(content_post)</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line"><span class="comment">## 12. scrapy</span></span><br><span class="line">为了爬取网站数据，提取结构性数据而编写的应用框架。可以应用在包括数据挖掘，信息处理或者储存历史数据等一系列的程序中。</span><br><span class="line">好处，编码方便，更快\</span><br><span class="line">流程：</span><br><span class="line"><span class="number">1.</span> 创建爬虫项目: scrapy startproject 项目名字</span><br><span class="line"><span class="number">2.</span> 创建爬虫文件： cd 项目名字/项目名字/spiders; scrapy genspider 爬虫文件的名字 要爬取的网站 (</span><br><span class="line"><span class="number">3.</span> 运行爬虫代码: scrapy crawl 爬虫的名字</span><br><span class="line">自动生成的代码：</span><br><span class="line">```python </span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaiduSpider</span>(scrapy.Spider):</span><br><span class="line">    <span class="comment">#爬虫的名字. 用于运行爬虫的时候使用的值</span></span><br><span class="line">    name = <span class="string">&#x27;baidu&#x27;</span></span><br><span class="line">    <span class="comment">#允许访问的域名</span></span><br><span class="line">    allowed_domains = [<span class="string">&#x27;www.baidu.com&#x27;</span>]</span><br><span class="line">    <span class="comment">#起始的url地址。</span></span><br><span class="line">    start_urls = [<span class="string">&#x27;http://www.baidu.com/&#x27;</span>]</span><br><span class="line"><span class="comment">#response是返回的那个对象.相当于response = urllib.requests.get()</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i love you&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="58同城"><a href="#58同城" class="headerlink" title="58同城"></a>58同城</h4><ol>
<li>scrapy startproject 项目名 &#x3D;&gt; 创建的文件目录：</li>
</ol>
<ul>
<li>scrapy项目的结果 <ul>
<li>项目名字<ul>
<li>项目名字<ul>
<li>spider 文件夹 （ 存储爬虫文件)<ul>
<li>init</li>
<li>自定义的爬虫文件，最为核心*********************</li>
</ul>
</li>
<li>init</li>
<li>items 定义数据结构的地方 爬取的数据都包含哪些</li>
<li>middlewares 中间件， 实现代理机制</li>
<li>pipelines, 管道， 用来处理下载数据</li>
<li>settings    用来配置文件 robots文件, ua定义等</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li>response的属性和方法<ul>
<li>response.text 获取的是响应的字符串</li>
<li>response.body 获取的是二进制数据</li>
<li>response.xpath 可以直接xpath 来解析response中的内容</li>
<li>reposne.extract() 提取selector 对象的data 属性值</li>
<li>response.extract_first() 提取的selector 列表的第一个数据</li>
</ul>
</li>
</ol>
<h4 id="scrapy-工作原理"><a href="#scrapy-工作原理" class="headerlink" title="scrapy 工作原理"></a>scrapy 工作原理</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start_urls = [<span class="string">&#x27;https://car.autohome.com.cn/price/brand-15.html&#x27;</span>]<span class="comment">#如果请求接口以html结尾，一定要记得不能在最后面添加&#x27;/&#x27;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/06/PYTHON-%E7%88%AC%E8%99%AB/" data-id="cl0j46a3n0000l4ux41fmhrn9" data-title="PYTHON 爬虫" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/06/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-03-07T02:34:11.579Z" itemprop="datePublished">2022-03-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/06/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/06/hello-world/" data-id="cl0j46a3w0002l4ux8oou5lbu" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/27/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E5%B9%B6%E8%A1%8C%E5%A4%9A%E6%A0%B8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/">读书笔记 -- 并行多核体系结构基础</a>
          </li>
        
          <li>
            <a href="/2022/04/27/%E9%AA%8C%E8%AF%81%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/">验证经验总结</a>
          </li>
        
          <li>
            <a href="/2022/03/18/shell-%E5%9F%BA%E7%A1%80/">shell_基础</a>
          </li>
        
          <li>
            <a href="/2022/03/15/regex-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE/">regex 正则表达</a>
          </li>
        
          <li>
            <a href="/2022/03/10/JSON-%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/">JSON 基本知识</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>